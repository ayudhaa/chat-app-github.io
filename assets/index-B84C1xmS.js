(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function fg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var If={exports:{}},_o={},Rf={exports:{}},z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bi=Symbol.for("react.element"),hg=Symbol.for("react.portal"),pg=Symbol.for("react.fragment"),mg=Symbol.for("react.strict_mode"),gg=Symbol.for("react.profiler"),_g=Symbol.for("react.provider"),yg=Symbol.for("react.context"),vg=Symbol.for("react.forward_ref"),wg=Symbol.for("react.suspense"),Eg=Symbol.for("react.memo"),Cg=Symbol.for("react.lazy"),Sc=Symbol.iterator;function Sg(t){return t===null||typeof t!="object"?null:(t=Sc&&t[Sc]||t["@@iterator"],typeof t=="function"?t:null)}var Pf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Df=Object.assign,Of={};function Sr(t,e,n){this.props=t,this.context=e,this.refs=Of,this.updater=n||Pf}Sr.prototype.isReactComponent={};Sr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Sr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Af(){}Af.prototype=Sr.prototype;function Qa(t,e,n){this.props=t,this.context=e,this.refs=Of,this.updater=n||Pf}var Ga=Qa.prototype=new Af;Ga.constructor=Qa;Df(Ga,Sr.prototype);Ga.isPureReactComponent=!0;var xc=Array.isArray,Mf=Object.prototype.hasOwnProperty,Ka={current:null},Lf={key:!0,ref:!0,__self:!0,__source:!0};function Ff(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Mf.call(e,r)&&!Lf.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:bi,type:t,key:s,ref:o,props:i,_owner:Ka.current}}function xg(t,e){return{$$typeof:bi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ya(t){return typeof t=="object"&&t!==null&&t.$$typeof===bi}function kg(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var kc=/\/+/g;function Vo(t,e){return typeof t=="object"&&t!==null&&t.key!=null?kg(""+t.key):e.toString(36)}function ms(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case bi:case hg:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Vo(o,0):r,xc(i)?(n="",t!=null&&(n=t.replace(kc,"$&/")+"/"),ms(i,e,n,"",function(u){return u})):i!=null&&(Ya(i)&&(i=xg(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(kc,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",xc(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+Vo(s,l);o+=ms(s,e,n,a,i)}else if(a=Sg(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+Vo(s,l++),o+=ms(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function qi(t,e,n){if(t==null)return t;var r=[],i=0;return ms(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Ng(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pe={current:null},gs={transition:null},Tg={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:gs,ReactCurrentOwner:Ka};function bf(){throw Error("act(...) is not supported in production builds of React.")}z.Children={map:qi,forEach:function(t,e,n){qi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qi(t,function(){e++}),e},toArray:function(t){return qi(t,function(e){return e})||[]},only:function(t){if(!Ya(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};z.Component=Sr;z.Fragment=pg;z.Profiler=gg;z.PureComponent=Qa;z.StrictMode=mg;z.Suspense=wg;z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tg;z.act=bf;z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Df({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ka.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)Mf.call(e,a)&&!Lf.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:bi,type:t.type,key:i,ref:s,props:r,_owner:o}};z.createContext=function(t){return t={$$typeof:yg,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_g,_context:t},t.Consumer=t};z.createElement=Ff;z.createFactory=function(t){var e=Ff.bind(null,t);return e.type=t,e};z.createRef=function(){return{current:null}};z.forwardRef=function(t){return{$$typeof:vg,render:t}};z.isValidElement=Ya;z.lazy=function(t){return{$$typeof:Cg,_payload:{_status:-1,_result:t},_init:Ng}};z.memo=function(t,e){return{$$typeof:Eg,type:t,compare:e===void 0?null:e}};z.startTransition=function(t){var e=gs.transition;gs.transition={};try{t()}finally{gs.transition=e}};z.unstable_act=bf;z.useCallback=function(t,e){return Pe.current.useCallback(t,e)};z.useContext=function(t){return Pe.current.useContext(t)};z.useDebugValue=function(){};z.useDeferredValue=function(t){return Pe.current.useDeferredValue(t)};z.useEffect=function(t,e){return Pe.current.useEffect(t,e)};z.useId=function(){return Pe.current.useId()};z.useImperativeHandle=function(t,e,n){return Pe.current.useImperativeHandle(t,e,n)};z.useInsertionEffect=function(t,e){return Pe.current.useInsertionEffect(t,e)};z.useLayoutEffect=function(t,e){return Pe.current.useLayoutEffect(t,e)};z.useMemo=function(t,e){return Pe.current.useMemo(t,e)};z.useReducer=function(t,e,n){return Pe.current.useReducer(t,e,n)};z.useRef=function(t){return Pe.current.useRef(t)};z.useState=function(t){return Pe.current.useState(t)};z.useSyncExternalStore=function(t,e,n){return Pe.current.useSyncExternalStore(t,e,n)};z.useTransition=function(){return Pe.current.useTransition()};z.version="18.3.1";Rf.exports=z;var U=Rf.exports;const Ig=fg(U);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rg=U,Pg=Symbol.for("react.element"),Dg=Symbol.for("react.fragment"),Og=Object.prototype.hasOwnProperty,Ag=Rg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mg={key:!0,ref:!0,__self:!0,__source:!0};function jf(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Og.call(e,r)&&!Mg.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Pg,type:t,key:s,ref:o,props:i,_owner:Ag.current}}_o.Fragment=Dg;_o.jsx=jf;_o.jsxs=jf;If.exports=_o;var v=If.exports,Dl={},zf={exports:{}},Qe={},Uf={exports:{}},$f={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,O){var M=k.length;k.push(O);e:for(;0<M;){var S=M-1>>>1,A=k[S];if(0<i(A,O))k[S]=O,k[M]=A,M=S;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var O=k[0],M=k.pop();if(M!==O){k[0]=M;e:for(var S=0,A=k.length,Q=A>>>1;S<Q;){var ne=2*(S+1)-1,yt=k[ne],tt=ne+1,bn=k[tt];if(0>i(yt,M))tt<A&&0>i(bn,yt)?(k[S]=bn,k[tt]=M,S=tt):(k[S]=yt,k[ne]=M,S=ne);else if(tt<A&&0>i(bn,M))k[S]=bn,k[tt]=M,S=tt;else break e}}return O}function i(k,O){var M=k.sortIndex-O.sortIndex;return M!==0?M:k.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],c=1,d=null,f=3,m=!1,_=!1,w=!1,T=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(k){for(var O=n(u);O!==null;){if(O.callback===null)r(u);else if(O.startTime<=k)r(u),O.sortIndex=O.expirationTime,e(a,O);else break;O=n(u)}}function y(k){if(w=!1,g(k),!_)if(n(a)!==null)_=!0,Pr(x);else{var O=n(u);O!==null&&Dr(y,O.startTime-k)}}function x(k,O){_=!1,w&&(w=!1,p(I),I=-1),m=!0;var M=f;try{for(g(O),d=n(a);d!==null&&(!(d.expirationTime>O)||k&&!Ue());){var S=d.callback;if(typeof S=="function"){d.callback=null,f=d.priorityLevel;var A=S(d.expirationTime<=O);O=t.unstable_now(),typeof A=="function"?d.callback=A:d===n(a)&&r(a),g(O)}else r(a);d=n(a)}if(d!==null)var Q=!0;else{var ne=n(u);ne!==null&&Dr(y,ne.startTime-O),Q=!1}return Q}finally{d=null,f=M,m=!1}}var R=!1,P=null,I=-1,J=5,j=-1;function Ue(){return!(t.unstable_now()-j<J)}function un(){if(P!==null){var k=t.unstable_now();j=k;var O=!0;try{O=P(!0,k)}finally{O?cn():(R=!1,P=null)}}else R=!1}var cn;if(typeof h=="function")cn=function(){h(un)};else if(typeof MessageChannel<"u"){var Yi=new MessageChannel,Ho=Yi.port2;Yi.port1.onmessage=un,cn=function(){Ho.postMessage(null)}}else cn=function(){T(un,0)};function Pr(k){P=k,R||(R=!0,cn())}function Dr(k,O){I=T(function(){k(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,Pr(x))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(k){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var M=f;f=O;try{return k()}finally{f=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,O){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var M=f;f=k;try{return O()}finally{f=M}},t.unstable_scheduleCallback=function(k,O,M){var S=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?S+M:S):M=S,k){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=M+A,k={id:c++,callback:O,priorityLevel:k,startTime:M,expirationTime:A,sortIndex:-1},M>S?(k.sortIndex=M,e(u,k),n(a)===null&&k===n(u)&&(w?(p(I),I=-1):w=!0,Dr(y,M-S))):(k.sortIndex=A,e(a,k),_||m||(_=!0,Pr(x))),k},t.unstable_shouldYield=Ue,t.unstable_wrapCallback=function(k){var O=f;return function(){var M=f;f=O;try{return k.apply(this,arguments)}finally{f=M}}}})($f);Uf.exports=$f;var Lg=Uf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg=U,Ve=Lg;function E(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bf=new Set,ui={};function On(t,e){cr(t,e),cr(t+"Capture",e)}function cr(t,e){for(ui[t]=e,t=0;t<e.length;t++)Bf.add(e[t])}var Tt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ol=Object.prototype.hasOwnProperty,bg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Nc={},Tc={};function jg(t){return Ol.call(Tc,t)?!0:Ol.call(Nc,t)?!1:bg.test(t)?Tc[t]=!0:(Nc[t]=!0,!1)}function zg(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ug(t,e,n,r){if(e===null||typeof e>"u"||zg(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function De(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ce={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ce[t]=new De(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ce[e]=new De(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ce[t]=new De(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ce[t]=new De(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ce[t]=new De(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ce[t]=new De(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ce[t]=new De(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ce[t]=new De(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ce[t]=new De(t,5,!1,t.toLowerCase(),null,!1,!1)});var qa=/[\-:]([a-z])/g;function Xa(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qa,Xa);Ce[e]=new De(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qa,Xa);Ce[e]=new De(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qa,Xa);Ce[e]=new De(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ce[t]=new De(t,1,!1,t.toLowerCase(),null,!1,!1)});Ce.xlinkHref=new De("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ce[t]=new De(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ja(t,e,n,r){var i=Ce.hasOwnProperty(e)?Ce[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ug(e,n,i,r)&&(n=null),r||i===null?jg(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Mt=Fg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xi=Symbol.for("react.element"),$n=Symbol.for("react.portal"),Bn=Symbol.for("react.fragment"),Za=Symbol.for("react.strict_mode"),Al=Symbol.for("react.profiler"),Wf=Symbol.for("react.provider"),Hf=Symbol.for("react.context"),eu=Symbol.for("react.forward_ref"),Ml=Symbol.for("react.suspense"),Ll=Symbol.for("react.suspense_list"),tu=Symbol.for("react.memo"),Ft=Symbol.for("react.lazy"),Vf=Symbol.for("react.offscreen"),Ic=Symbol.iterator;function Or(t){return t===null||typeof t!="object"?null:(t=Ic&&t[Ic]||t["@@iterator"],typeof t=="function"?t:null)}var oe=Object.assign,Qo;function Vr(t){if(Qo===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Qo=e&&e[1]||""}return`
`+Qo+t}var Go=!1;function Ko(t,e){if(!t||Go)return"";Go=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{Go=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vr(t):""}function $g(t){switch(t.tag){case 5:return Vr(t.type);case 16:return Vr("Lazy");case 13:return Vr("Suspense");case 19:return Vr("SuspenseList");case 0:case 2:case 15:return t=Ko(t.type,!1),t;case 11:return t=Ko(t.type.render,!1),t;case 1:return t=Ko(t.type,!0),t;default:return""}}function Fl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bn:return"Fragment";case $n:return"Portal";case Al:return"Profiler";case Za:return"StrictMode";case Ml:return"Suspense";case Ll:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Hf:return(t.displayName||"Context")+".Consumer";case Wf:return(t._context.displayName||"Context")+".Provider";case eu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tu:return e=t.displayName||null,e!==null?e:Fl(t.type)||"Memo";case Ft:e=t._payload,t=t._init;try{return Fl(t(e))}catch{}}return null}function Bg(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fl(e);case 8:return e===Za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Qf(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Wg(t){var e=Qf(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ji(t){t._valueTracker||(t._valueTracker=Wg(t))}function Gf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Qf(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Is(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bl(t,e){var n=e.checked;return oe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Rc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zt(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Kf(t,e){e=e.checked,e!=null&&Ja(t,"checked",e,!1)}function jl(t,e){Kf(t,e);var n=Zt(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zl(t,e.type,n):e.hasOwnProperty("defaultValue")&&zl(t,e.type,Zt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Pc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function zl(t,e,n){(e!=="number"||Is(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Qr=Array.isArray;function er(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ul(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(E(91));return oe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Dc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(E(92));if(Qr(n)){if(1<n.length)throw Error(E(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zt(n)}}function Yf(t,e){var n=Zt(e.value),r=Zt(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Oc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $l(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zi,Xf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zi=Zi||document.createElement("div"),Zi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ci(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Yr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hg=["Webkit","ms","Moz","O"];Object.keys(Yr).forEach(function(t){Hg.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yr[e]=Yr[t]})});function Jf(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Yr.hasOwnProperty(t)&&Yr[t]?(""+e).trim():e+"px"}function Zf(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Jf(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Vg=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bl(t,e){if(e){if(Vg[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(E(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(E(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(e.style!=null&&typeof e.style!="object")throw Error(E(62))}}function Wl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hl=null;function nu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vl=null,tr=null,nr=null;function Ac(t){if(t=Ui(t)){if(typeof Vl!="function")throw Error(E(280));var e=t.stateNode;e&&(e=Co(e),Vl(t.stateNode,t.type,e))}}function eh(t){tr?nr?nr.push(t):nr=[t]:tr=t}function th(){if(tr){var t=tr,e=nr;if(nr=tr=null,Ac(t),e)for(t=0;t<e.length;t++)Ac(e[t])}}function nh(t,e){return t(e)}function rh(){}var Yo=!1;function ih(t,e,n){if(Yo)return t(e,n);Yo=!0;try{return nh(t,e,n)}finally{Yo=!1,(tr!==null||nr!==null)&&(rh(),th())}}function di(t,e){var n=t.stateNode;if(n===null)return null;var r=Co(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(E(231,e,typeof n));return n}var Ql=!1;if(Tt)try{var Ar={};Object.defineProperty(Ar,"passive",{get:function(){Ql=!0}}),window.addEventListener("test",Ar,Ar),window.removeEventListener("test",Ar,Ar)}catch{Ql=!1}function Qg(t,e,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var qr=!1,Rs=null,Ps=!1,Gl=null,Gg={onError:function(t){qr=!0,Rs=t}};function Kg(t,e,n,r,i,s,o,l,a){qr=!1,Rs=null,Qg.apply(Gg,arguments)}function Yg(t,e,n,r,i,s,o,l,a){if(Kg.apply(this,arguments),qr){if(qr){var u=Rs;qr=!1,Rs=null}else throw Error(E(198));Ps||(Ps=!0,Gl=u)}}function An(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function sh(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Mc(t){if(An(t)!==t)throw Error(E(188))}function qg(t){var e=t.alternate;if(!e){if(e=An(t),e===null)throw Error(E(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Mc(i),t;if(s===r)return Mc(i),e;s=s.sibling}throw Error(E(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(E(189))}}if(n.alternate!==r)throw Error(E(190))}if(n.tag!==3)throw Error(E(188));return n.stateNode.current===n?t:e}function oh(t){return t=qg(t),t!==null?lh(t):null}function lh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=lh(t);if(e!==null)return e;t=t.sibling}return null}var ah=Ve.unstable_scheduleCallback,Lc=Ve.unstable_cancelCallback,Xg=Ve.unstable_shouldYield,Jg=Ve.unstable_requestPaint,ae=Ve.unstable_now,Zg=Ve.unstable_getCurrentPriorityLevel,ru=Ve.unstable_ImmediatePriority,uh=Ve.unstable_UserBlockingPriority,Ds=Ve.unstable_NormalPriority,e_=Ve.unstable_LowPriority,ch=Ve.unstable_IdlePriority,yo=null,mt=null;function t_(t){if(mt&&typeof mt.onCommitFiberRoot=="function")try{mt.onCommitFiberRoot(yo,t,void 0,(t.current.flags&128)===128)}catch{}}var at=Math.clz32?Math.clz32:i_,n_=Math.log,r_=Math.LN2;function i_(t){return t>>>=0,t===0?32:31-(n_(t)/r_|0)|0}var es=64,ts=4194304;function Gr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Os(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Gr(l):(s&=o,s!==0&&(r=Gr(s)))}else o=n&~i,o!==0?r=Gr(o):s!==0&&(r=Gr(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-at(e),i=1<<n,r|=t[n],e&=~i;return r}function s_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function o_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-at(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=s_(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function Kl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function dh(){var t=es;return es<<=1,!(es&4194240)&&(es=64),t}function qo(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ji(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-at(e),t[e]=n}function l_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-at(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function iu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-at(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var W=0;function fh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var hh,su,ph,mh,gh,Yl=!1,ns=[],Bt=null,Wt=null,Ht=null,fi=new Map,hi=new Map,jt=[],a_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fc(t,e){switch(t){case"focusin":case"focusout":Bt=null;break;case"dragenter":case"dragleave":Wt=null;break;case"mouseover":case"mouseout":Ht=null;break;case"pointerover":case"pointerout":fi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hi.delete(e.pointerId)}}function Mr(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ui(e),e!==null&&su(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function u_(t,e,n,r,i){switch(e){case"focusin":return Bt=Mr(Bt,t,e,n,r,i),!0;case"dragenter":return Wt=Mr(Wt,t,e,n,r,i),!0;case"mouseover":return Ht=Mr(Ht,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return fi.set(s,Mr(fi.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,hi.set(s,Mr(hi.get(s)||null,t,e,n,r,i)),!0}return!1}function _h(t){var e=mn(t.target);if(e!==null){var n=An(e);if(n!==null){if(e=n.tag,e===13){if(e=sh(n),e!==null){t.blockedOn=e,gh(t.priority,function(){ph(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _s(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ql(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Hl=r,n.target.dispatchEvent(r),Hl=null}else return e=Ui(n),e!==null&&su(e),t.blockedOn=n,!1;e.shift()}return!0}function bc(t,e,n){_s(t)&&n.delete(e)}function c_(){Yl=!1,Bt!==null&&_s(Bt)&&(Bt=null),Wt!==null&&_s(Wt)&&(Wt=null),Ht!==null&&_s(Ht)&&(Ht=null),fi.forEach(bc),hi.forEach(bc)}function Lr(t,e){t.blockedOn===e&&(t.blockedOn=null,Yl||(Yl=!0,Ve.unstable_scheduleCallback(Ve.unstable_NormalPriority,c_)))}function pi(t){function e(i){return Lr(i,t)}if(0<ns.length){Lr(ns[0],t);for(var n=1;n<ns.length;n++){var r=ns[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Bt!==null&&Lr(Bt,t),Wt!==null&&Lr(Wt,t),Ht!==null&&Lr(Ht,t),fi.forEach(e),hi.forEach(e),n=0;n<jt.length;n++)r=jt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<jt.length&&(n=jt[0],n.blockedOn===null);)_h(n),n.blockedOn===null&&jt.shift()}var rr=Mt.ReactCurrentBatchConfig,As=!0;function d_(t,e,n,r){var i=W,s=rr.transition;rr.transition=null;try{W=1,ou(t,e,n,r)}finally{W=i,rr.transition=s}}function f_(t,e,n,r){var i=W,s=rr.transition;rr.transition=null;try{W=4,ou(t,e,n,r)}finally{W=i,rr.transition=s}}function ou(t,e,n,r){if(As){var i=ql(t,e,n,r);if(i===null)ol(t,e,r,Ms,n),Fc(t,r);else if(u_(i,t,e,n,r))r.stopPropagation();else if(Fc(t,r),e&4&&-1<a_.indexOf(t)){for(;i!==null;){var s=Ui(i);if(s!==null&&hh(s),s=ql(t,e,n,r),s===null&&ol(t,e,r,Ms,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ol(t,e,r,null,n)}}var Ms=null;function ql(t,e,n,r){if(Ms=null,t=nu(r),t=mn(t),t!==null)if(e=An(t),e===null)t=null;else if(n=e.tag,n===13){if(t=sh(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ms=t,null}function yh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zg()){case ru:return 1;case uh:return 4;case Ds:case e_:return 16;case ch:return 536870912;default:return 16}default:return 16}}var Ut=null,lu=null,ys=null;function vh(){if(ys)return ys;var t,e=lu,n=e.length,r,i="value"in Ut?Ut.value:Ut.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ys=i.slice(t,1<r?1-r:void 0)}function vs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function rs(){return!0}function jc(){return!1}function Ge(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?rs:jc,this.isPropagationStopped=jc,this}return oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rs)},persist:function(){},isPersistent:rs}),e}var xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},au=Ge(xr),zi=oe({},xr,{view:0,detail:0}),h_=Ge(zi),Xo,Jo,Fr,vo=oe({},zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fr&&(Fr&&t.type==="mousemove"?(Xo=t.screenX-Fr.screenX,Jo=t.screenY-Fr.screenY):Jo=Xo=0,Fr=t),Xo)},movementY:function(t){return"movementY"in t?t.movementY:Jo}}),zc=Ge(vo),p_=oe({},vo,{dataTransfer:0}),m_=Ge(p_),g_=oe({},zi,{relatedTarget:0}),Zo=Ge(g_),__=oe({},xr,{animationName:0,elapsedTime:0,pseudoElement:0}),y_=Ge(__),v_=oe({},xr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),w_=Ge(v_),E_=oe({},xr,{data:0}),Uc=Ge(E_),C_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},x_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function k_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=x_[t])?!!e[t]:!1}function uu(){return k_}var N_=oe({},zi,{key:function(t){if(t.key){var e=C_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?S_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uu,charCode:function(t){return t.type==="keypress"?vs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),T_=Ge(N_),I_=oe({},vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$c=Ge(I_),R_=oe({},zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uu}),P_=Ge(R_),D_=oe({},xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),O_=Ge(D_),A_=oe({},vo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),M_=Ge(A_),L_=[9,13,27,32],cu=Tt&&"CompositionEvent"in window,Xr=null;Tt&&"documentMode"in document&&(Xr=document.documentMode);var F_=Tt&&"TextEvent"in window&&!Xr,wh=Tt&&(!cu||Xr&&8<Xr&&11>=Xr),Bc=" ",Wc=!1;function Eh(t,e){switch(t){case"keyup":return L_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ch(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wn=!1;function b_(t,e){switch(t){case"compositionend":return Ch(e);case"keypress":return e.which!==32?null:(Wc=!0,Bc);case"textInput":return t=e.data,t===Bc&&Wc?null:t;default:return null}}function j_(t,e){if(Wn)return t==="compositionend"||!cu&&Eh(t,e)?(t=vh(),ys=lu=Ut=null,Wn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wh&&e.locale!=="ko"?null:e.data;default:return null}}var z_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!z_[t.type]:e==="textarea"}function Sh(t,e,n,r){eh(r),e=Ls(e,"onChange"),0<e.length&&(n=new au("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Jr=null,mi=null;function U_(t){Mh(t,0)}function wo(t){var e=Qn(t);if(Gf(e))return t}function $_(t,e){if(t==="change")return e}var xh=!1;if(Tt){var el;if(Tt){var tl="oninput"in document;if(!tl){var Vc=document.createElement("div");Vc.setAttribute("oninput","return;"),tl=typeof Vc.oninput=="function"}el=tl}else el=!1;xh=el&&(!document.documentMode||9<document.documentMode)}function Qc(){Jr&&(Jr.detachEvent("onpropertychange",kh),mi=Jr=null)}function kh(t){if(t.propertyName==="value"&&wo(mi)){var e=[];Sh(e,mi,t,nu(t)),ih(U_,e)}}function B_(t,e,n){t==="focusin"?(Qc(),Jr=e,mi=n,Jr.attachEvent("onpropertychange",kh)):t==="focusout"&&Qc()}function W_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wo(mi)}function H_(t,e){if(t==="click")return wo(e)}function V_(t,e){if(t==="input"||t==="change")return wo(e)}function Q_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dt=typeof Object.is=="function"?Object.is:Q_;function gi(t,e){if(dt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ol.call(e,i)||!dt(t[i],e[i]))return!1}return!0}function Gc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kc(t,e){var n=Gc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Gc(n)}}function Nh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Nh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Th(){for(var t=window,e=Is();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Is(t.document)}return e}function du(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function G_(t){var e=Th(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Nh(n.ownerDocument.documentElement,n)){if(r!==null&&du(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Kc(n,s);var o=Kc(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var K_=Tt&&"documentMode"in document&&11>=document.documentMode,Hn=null,Xl=null,Zr=null,Jl=!1;function Yc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jl||Hn==null||Hn!==Is(r)||(r=Hn,"selectionStart"in r&&du(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zr&&gi(Zr,r)||(Zr=r,r=Ls(Xl,"onSelect"),0<r.length&&(e=new au("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Hn)))}function is(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Vn={animationend:is("Animation","AnimationEnd"),animationiteration:is("Animation","AnimationIteration"),animationstart:is("Animation","AnimationStart"),transitionend:is("Transition","TransitionEnd")},nl={},Ih={};Tt&&(Ih=document.createElement("div").style,"AnimationEvent"in window||(delete Vn.animationend.animation,delete Vn.animationiteration.animation,delete Vn.animationstart.animation),"TransitionEvent"in window||delete Vn.transitionend.transition);function Eo(t){if(nl[t])return nl[t];if(!Vn[t])return t;var e=Vn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ih)return nl[t]=e[n];return t}var Rh=Eo("animationend"),Ph=Eo("animationiteration"),Dh=Eo("animationstart"),Oh=Eo("transitionend"),Ah=new Map,qc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rn(t,e){Ah.set(t,e),On(e,[t])}for(var rl=0;rl<qc.length;rl++){var il=qc[rl],Y_=il.toLowerCase(),q_=il[0].toUpperCase()+il.slice(1);rn(Y_,"on"+q_)}rn(Rh,"onAnimationEnd");rn(Ph,"onAnimationIteration");rn(Dh,"onAnimationStart");rn("dblclick","onDoubleClick");rn("focusin","onFocus");rn("focusout","onBlur");rn(Oh,"onTransitionEnd");cr("onMouseEnter",["mouseout","mouseover"]);cr("onMouseLeave",["mouseout","mouseover"]);cr("onPointerEnter",["pointerout","pointerover"]);cr("onPointerLeave",["pointerout","pointerover"]);On("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));On("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));On("onBeforeInput",["compositionend","keypress","textInput","paste"]);On("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));On("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));On("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),X_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kr));function Xc(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Yg(r,e,void 0,t),t.currentTarget=null}function Mh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;Xc(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;Xc(i,l,u),s=a}}}if(Ps)throw t=Gl,Ps=!1,Gl=null,t}function Y(t,e){var n=e[ra];n===void 0&&(n=e[ra]=new Set);var r=t+"__bubble";n.has(r)||(Lh(e,t,2,!1),n.add(r))}function sl(t,e,n){var r=0;e&&(r|=4),Lh(n,t,r,e)}var ss="_reactListening"+Math.random().toString(36).slice(2);function _i(t){if(!t[ss]){t[ss]=!0,Bf.forEach(function(n){n!=="selectionchange"&&(X_.has(n)||sl(n,!1,t),sl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ss]||(e[ss]=!0,sl("selectionchange",!1,e))}}function Lh(t,e,n,r){switch(yh(e)){case 1:var i=d_;break;case 4:i=f_;break;default:i=ou}n=i.bind(null,e,n,t),i=void 0,!Ql||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ol(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=mn(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}ih(function(){var u=s,c=nu(n),d=[];e:{var f=Ah.get(t);if(f!==void 0){var m=au,_=t;switch(t){case"keypress":if(vs(n)===0)break e;case"keydown":case"keyup":m=T_;break;case"focusin":_="focus",m=Zo;break;case"focusout":_="blur",m=Zo;break;case"beforeblur":case"afterblur":m=Zo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=zc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=m_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=P_;break;case Rh:case Ph:case Dh:m=y_;break;case Oh:m=O_;break;case"scroll":m=h_;break;case"wheel":m=M_;break;case"copy":case"cut":case"paste":m=w_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=$c}var w=(e&4)!==0,T=!w&&t==="scroll",p=w?f!==null?f+"Capture":null:f;w=[];for(var h=u,g;h!==null;){g=h;var y=g.stateNode;if(g.tag===5&&y!==null&&(g=y,p!==null&&(y=di(h,p),y!=null&&w.push(yi(h,y,g)))),T)break;h=h.return}0<w.length&&(f=new m(f,_,null,n,c),d.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==Hl&&(_=n.relatedTarget||n.fromElement)&&(mn(_)||_[It]))break e;if((m||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=u,_=_?mn(_):null,_!==null&&(T=An(_),_!==T||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=u),m!==_)){if(w=zc,y="onMouseLeave",p="onMouseEnter",h="mouse",(t==="pointerout"||t==="pointerover")&&(w=$c,y="onPointerLeave",p="onPointerEnter",h="pointer"),T=m==null?f:Qn(m),g=_==null?f:Qn(_),f=new w(y,h+"leave",m,n,c),f.target=T,f.relatedTarget=g,y=null,mn(c)===u&&(w=new w(p,h+"enter",_,n,c),w.target=g,w.relatedTarget=T,y=w),T=y,m&&_)t:{for(w=m,p=_,h=0,g=w;g;g=jn(g))h++;for(g=0,y=p;y;y=jn(y))g++;for(;0<h-g;)w=jn(w),h--;for(;0<g-h;)p=jn(p),g--;for(;h--;){if(w===p||p!==null&&w===p.alternate)break t;w=jn(w),p=jn(p)}w=null}else w=null;m!==null&&Jc(d,f,m,w,!1),_!==null&&T!==null&&Jc(d,T,_,w,!0)}}e:{if(f=u?Qn(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var x=$_;else if(Hc(f))if(xh)x=V_;else{x=W_;var R=B_}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(x=H_);if(x&&(x=x(t,u))){Sh(d,x,n,c);break e}R&&R(t,f,u),t==="focusout"&&(R=f._wrapperState)&&R.controlled&&f.type==="number"&&zl(f,"number",f.value)}switch(R=u?Qn(u):window,t){case"focusin":(Hc(R)||R.contentEditable==="true")&&(Hn=R,Xl=u,Zr=null);break;case"focusout":Zr=Xl=Hn=null;break;case"mousedown":Jl=!0;break;case"contextmenu":case"mouseup":case"dragend":Jl=!1,Yc(d,n,c);break;case"selectionchange":if(K_)break;case"keydown":case"keyup":Yc(d,n,c)}var P;if(cu)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Wn?Eh(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(wh&&n.locale!=="ko"&&(Wn||I!=="onCompositionStart"?I==="onCompositionEnd"&&Wn&&(P=vh()):(Ut=c,lu="value"in Ut?Ut.value:Ut.textContent,Wn=!0)),R=Ls(u,I),0<R.length&&(I=new Uc(I,t,null,n,c),d.push({event:I,listeners:R}),P?I.data=P:(P=Ch(n),P!==null&&(I.data=P)))),(P=F_?b_(t,n):j_(t,n))&&(u=Ls(u,"onBeforeInput"),0<u.length&&(c=new Uc("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=P))}Mh(d,e)})}function yi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ls(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=di(t,n),s!=null&&r.unshift(yi(t,s,i)),s=di(t,e),s!=null&&r.push(yi(t,s,i))),t=t.return}return r}function jn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Jc(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=di(n,s),a!=null&&o.unshift(yi(n,a,l))):i||(a=di(n,s),a!=null&&o.push(yi(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var J_=/\r\n?/g,Z_=/\u0000|\uFFFD/g;function Zc(t){return(typeof t=="string"?t:""+t).replace(J_,`
`).replace(Z_,"")}function os(t,e,n){if(e=Zc(e),Zc(t)!==e&&n)throw Error(E(425))}function Fs(){}var Zl=null,ea=null;function ta(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var na=typeof setTimeout=="function"?setTimeout:void 0,ey=typeof clearTimeout=="function"?clearTimeout:void 0,ed=typeof Promise=="function"?Promise:void 0,ty=typeof queueMicrotask=="function"?queueMicrotask:typeof ed<"u"?function(t){return ed.resolve(null).then(t).catch(ny)}:na;function ny(t){setTimeout(function(){throw t})}function ll(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),pi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);pi(e)}function Vt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function td(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var kr=Math.random().toString(36).slice(2),pt="__reactFiber$"+kr,vi="__reactProps$"+kr,It="__reactContainer$"+kr,ra="__reactEvents$"+kr,ry="__reactListeners$"+kr,iy="__reactHandles$"+kr;function mn(t){var e=t[pt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[It]||n[pt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=td(t);t!==null;){if(n=t[pt])return n;t=td(t)}return e}t=n,n=t.parentNode}return null}function Ui(t){return t=t[pt]||t[It],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(E(33))}function Co(t){return t[vi]||null}var ia=[],Gn=-1;function sn(t){return{current:t}}function X(t){0>Gn||(t.current=ia[Gn],ia[Gn]=null,Gn--)}function K(t,e){Gn++,ia[Gn]=t.current,t.current=e}var en={},Ne=sn(en),Fe=sn(!1),Sn=en;function dr(t,e){var n=t.type.contextTypes;if(!n)return en;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function be(t){return t=t.childContextTypes,t!=null}function bs(){X(Fe),X(Ne)}function nd(t,e,n){if(Ne.current!==en)throw Error(E(168));K(Ne,e),K(Fe,n)}function Fh(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(E(108,Bg(t)||"Unknown",i));return oe({},n,r)}function js(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||en,Sn=Ne.current,K(Ne,t),K(Fe,Fe.current),!0}function rd(t,e,n){var r=t.stateNode;if(!r)throw Error(E(169));n?(t=Fh(t,e,Sn),r.__reactInternalMemoizedMergedChildContext=t,X(Fe),X(Ne),K(Ne,t)):X(Fe),K(Fe,n)}var wt=null,So=!1,al=!1;function bh(t){wt===null?wt=[t]:wt.push(t)}function sy(t){So=!0,bh(t)}function on(){if(!al&&wt!==null){al=!0;var t=0,e=W;try{var n=wt;for(W=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}wt=null,So=!1}catch(i){throw wt!==null&&(wt=wt.slice(t+1)),ah(ru,on),i}finally{W=e,al=!1}}return null}var Kn=[],Yn=0,zs=null,Us=0,Ke=[],Ye=0,xn=null,Ct=1,St="";function dn(t,e){Kn[Yn++]=Us,Kn[Yn++]=zs,zs=t,Us=e}function jh(t,e,n){Ke[Ye++]=Ct,Ke[Ye++]=St,Ke[Ye++]=xn,xn=t;var r=Ct;t=St;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ct=1<<32-at(e)+i|n<<i|r,St=s+t}else Ct=1<<s|n<<i|r,St=t}function fu(t){t.return!==null&&(dn(t,1),jh(t,1,0))}function hu(t){for(;t===zs;)zs=Kn[--Yn],Kn[Yn]=null,Us=Kn[--Yn],Kn[Yn]=null;for(;t===xn;)xn=Ke[--Ye],Ke[Ye]=null,St=Ke[--Ye],Ke[Ye]=null,Ct=Ke[--Ye],Ke[Ye]=null}var He=null,Be=null,Z=!1,st=null;function zh(t,e){var n=qe(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function id(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,He=t,Be=Vt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,He=t,Be=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=xn!==null?{id:Ct,overflow:St}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qe(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,He=t,Be=null,!0):!1;default:return!1}}function sa(t){return(t.mode&1)!==0&&(t.flags&128)===0}function oa(t){if(Z){var e=Be;if(e){var n=e;if(!id(t,e)){if(sa(t))throw Error(E(418));e=Vt(n.nextSibling);var r=He;e&&id(t,e)?zh(r,n):(t.flags=t.flags&-4097|2,Z=!1,He=t)}}else{if(sa(t))throw Error(E(418));t.flags=t.flags&-4097|2,Z=!1,He=t}}}function sd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;He=t}function ls(t){if(t!==He)return!1;if(!Z)return sd(t),Z=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ta(t.type,t.memoizedProps)),e&&(e=Be)){if(sa(t))throw Uh(),Error(E(418));for(;e;)zh(t,e),e=Vt(e.nextSibling)}if(sd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(E(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Be=Vt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Be=null}}else Be=He?Vt(t.stateNode.nextSibling):null;return!0}function Uh(){for(var t=Be;t;)t=Vt(t.nextSibling)}function fr(){Be=He=null,Z=!1}function pu(t){st===null?st=[t]:st.push(t)}var oy=Mt.ReactCurrentBatchConfig;function br(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(E(309));var r=n.stateNode}if(!r)throw Error(E(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(E(284));if(!n._owner)throw Error(E(290,t))}return t}function as(t,e){throw t=Object.prototype.toString.call(e),Error(E(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function od(t){var e=t._init;return e(t._payload)}function $h(t){function e(p,h){if(t){var g=p.deletions;g===null?(p.deletions=[h],p.flags|=16):g.push(h)}}function n(p,h){if(!t)return null;for(;h!==null;)e(p,h),h=h.sibling;return null}function r(p,h){for(p=new Map;h!==null;)h.key!==null?p.set(h.key,h):p.set(h.index,h),h=h.sibling;return p}function i(p,h){return p=Yt(p,h),p.index=0,p.sibling=null,p}function s(p,h,g){return p.index=g,t?(g=p.alternate,g!==null?(g=g.index,g<h?(p.flags|=2,h):g):(p.flags|=2,h)):(p.flags|=1048576,h)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,h,g,y){return h===null||h.tag!==6?(h=ml(g,p.mode,y),h.return=p,h):(h=i(h,g),h.return=p,h)}function a(p,h,g,y){var x=g.type;return x===Bn?c(p,h,g.props.children,y,g.key):h!==null&&(h.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Ft&&od(x)===h.type)?(y=i(h,g.props),y.ref=br(p,h,g),y.return=p,y):(y=Ns(g.type,g.key,g.props,null,p.mode,y),y.ref=br(p,h,g),y.return=p,y)}function u(p,h,g,y){return h===null||h.tag!==4||h.stateNode.containerInfo!==g.containerInfo||h.stateNode.implementation!==g.implementation?(h=gl(g,p.mode,y),h.return=p,h):(h=i(h,g.children||[]),h.return=p,h)}function c(p,h,g,y,x){return h===null||h.tag!==7?(h=Cn(g,p.mode,y,x),h.return=p,h):(h=i(h,g),h.return=p,h)}function d(p,h,g){if(typeof h=="string"&&h!==""||typeof h=="number")return h=ml(""+h,p.mode,g),h.return=p,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Xi:return g=Ns(h.type,h.key,h.props,null,p.mode,g),g.ref=br(p,null,h),g.return=p,g;case $n:return h=gl(h,p.mode,g),h.return=p,h;case Ft:var y=h._init;return d(p,y(h._payload),g)}if(Qr(h)||Or(h))return h=Cn(h,p.mode,g,null),h.return=p,h;as(p,h)}return null}function f(p,h,g,y){var x=h!==null?h.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return x!==null?null:l(p,h,""+g,y);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Xi:return g.key===x?a(p,h,g,y):null;case $n:return g.key===x?u(p,h,g,y):null;case Ft:return x=g._init,f(p,h,x(g._payload),y)}if(Qr(g)||Or(g))return x!==null?null:c(p,h,g,y,null);as(p,g)}return null}function m(p,h,g,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return p=p.get(g)||null,l(h,p,""+y,x);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Xi:return p=p.get(y.key===null?g:y.key)||null,a(h,p,y,x);case $n:return p=p.get(y.key===null?g:y.key)||null,u(h,p,y,x);case Ft:var R=y._init;return m(p,h,g,R(y._payload),x)}if(Qr(y)||Or(y))return p=p.get(g)||null,c(h,p,y,x,null);as(h,y)}return null}function _(p,h,g,y){for(var x=null,R=null,P=h,I=h=0,J=null;P!==null&&I<g.length;I++){P.index>I?(J=P,P=null):J=P.sibling;var j=f(p,P,g[I],y);if(j===null){P===null&&(P=J);break}t&&P&&j.alternate===null&&e(p,P),h=s(j,h,I),R===null?x=j:R.sibling=j,R=j,P=J}if(I===g.length)return n(p,P),Z&&dn(p,I),x;if(P===null){for(;I<g.length;I++)P=d(p,g[I],y),P!==null&&(h=s(P,h,I),R===null?x=P:R.sibling=P,R=P);return Z&&dn(p,I),x}for(P=r(p,P);I<g.length;I++)J=m(P,p,I,g[I],y),J!==null&&(t&&J.alternate!==null&&P.delete(J.key===null?I:J.key),h=s(J,h,I),R===null?x=J:R.sibling=J,R=J);return t&&P.forEach(function(Ue){return e(p,Ue)}),Z&&dn(p,I),x}function w(p,h,g,y){var x=Or(g);if(typeof x!="function")throw Error(E(150));if(g=x.call(g),g==null)throw Error(E(151));for(var R=x=null,P=h,I=h=0,J=null,j=g.next();P!==null&&!j.done;I++,j=g.next()){P.index>I?(J=P,P=null):J=P.sibling;var Ue=f(p,P,j.value,y);if(Ue===null){P===null&&(P=J);break}t&&P&&Ue.alternate===null&&e(p,P),h=s(Ue,h,I),R===null?x=Ue:R.sibling=Ue,R=Ue,P=J}if(j.done)return n(p,P),Z&&dn(p,I),x;if(P===null){for(;!j.done;I++,j=g.next())j=d(p,j.value,y),j!==null&&(h=s(j,h,I),R===null?x=j:R.sibling=j,R=j);return Z&&dn(p,I),x}for(P=r(p,P);!j.done;I++,j=g.next())j=m(P,p,I,j.value,y),j!==null&&(t&&j.alternate!==null&&P.delete(j.key===null?I:j.key),h=s(j,h,I),R===null?x=j:R.sibling=j,R=j);return t&&P.forEach(function(un){return e(p,un)}),Z&&dn(p,I),x}function T(p,h,g,y){if(typeof g=="object"&&g!==null&&g.type===Bn&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Xi:e:{for(var x=g.key,R=h;R!==null;){if(R.key===x){if(x=g.type,x===Bn){if(R.tag===7){n(p,R.sibling),h=i(R,g.props.children),h.return=p,p=h;break e}}else if(R.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Ft&&od(x)===R.type){n(p,R.sibling),h=i(R,g.props),h.ref=br(p,R,g),h.return=p,p=h;break e}n(p,R);break}else e(p,R);R=R.sibling}g.type===Bn?(h=Cn(g.props.children,p.mode,y,g.key),h.return=p,p=h):(y=Ns(g.type,g.key,g.props,null,p.mode,y),y.ref=br(p,h,g),y.return=p,p=y)}return o(p);case $n:e:{for(R=g.key;h!==null;){if(h.key===R)if(h.tag===4&&h.stateNode.containerInfo===g.containerInfo&&h.stateNode.implementation===g.implementation){n(p,h.sibling),h=i(h,g.children||[]),h.return=p,p=h;break e}else{n(p,h);break}else e(p,h);h=h.sibling}h=gl(g,p.mode,y),h.return=p,p=h}return o(p);case Ft:return R=g._init,T(p,h,R(g._payload),y)}if(Qr(g))return _(p,h,g,y);if(Or(g))return w(p,h,g,y);as(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,h!==null&&h.tag===6?(n(p,h.sibling),h=i(h,g),h.return=p,p=h):(n(p,h),h=ml(g,p.mode,y),h.return=p,p=h),o(p)):n(p,h)}return T}var hr=$h(!0),Bh=$h(!1),$s=sn(null),Bs=null,qn=null,mu=null;function gu(){mu=qn=Bs=null}function _u(t){var e=$s.current;X($s),t._currentValue=e}function la(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ir(t,e){Bs=t,mu=qn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ae=!0),t.firstContext=null)}function Ze(t){var e=t._currentValue;if(mu!==t)if(t={context:t,memoizedValue:e,next:null},qn===null){if(Bs===null)throw Error(E(308));qn=t,Bs.dependencies={lanes:0,firstContext:t}}else qn=qn.next=t;return e}var gn=null;function yu(t){gn===null?gn=[t]:gn.push(t)}function Wh(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,yu(e)):(n.next=i.next,i.next=n),e.interleaved=n,Rt(t,r)}function Rt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var bt=!1;function vu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function kt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qt(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,$&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Rt(t,n)}return i=r.interleaved,i===null?(e.next=e,yu(r)):(e.next=i.next,i.next=e),r.interleaved=e,Rt(t,n)}function ws(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,iu(t,n)}}function ld(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ws(t,e,n,r){var i=t.updateQueue;bt=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var c=t.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==o&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,c=u=a=null,l=s;do{var f=l.lane,m=l.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,w=l;switch(f=e,m=n,w.tag){case 1:if(_=w.payload,typeof _=="function"){d=_.call(m,d,f);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=w.payload,f=typeof _=="function"?_.call(m,d,f):_,f==null)break e;d=oe({},d,f);break e;case 2:bt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=m,a=d):c=c.next=m,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(a=d),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Nn|=o,t.lanes=o,t.memoizedState=d}}function ad(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(E(191,i));i.call(r)}}}var $i={},gt=sn($i),wi=sn($i),Ei=sn($i);function _n(t){if(t===$i)throw Error(E(174));return t}function wu(t,e){switch(K(Ei,e),K(wi,t),K(gt,$i),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$l(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$l(e,t)}X(gt),K(gt,e)}function pr(){X(gt),X(wi),X(Ei)}function Vh(t){_n(Ei.current);var e=_n(gt.current),n=$l(e,t.type);e!==n&&(K(wi,t),K(gt,n))}function Eu(t){wi.current===t&&(X(gt),X(wi))}var re=sn(0);function Hs(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ul=[];function Cu(){for(var t=0;t<ul.length;t++)ul[t]._workInProgressVersionPrimary=null;ul.length=0}var Es=Mt.ReactCurrentDispatcher,cl=Mt.ReactCurrentBatchConfig,kn=0,se=null,fe=null,me=null,Vs=!1,ei=!1,Ci=0,ly=0;function Se(){throw Error(E(321))}function Su(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!dt(t[n],e[n]))return!1;return!0}function xu(t,e,n,r,i,s){if(kn=s,se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Es.current=t===null||t.memoizedState===null?dy:fy,t=n(r,i),ei){s=0;do{if(ei=!1,Ci=0,25<=s)throw Error(E(301));s+=1,me=fe=null,e.updateQueue=null,Es.current=hy,t=n(r,i)}while(ei)}if(Es.current=Qs,e=fe!==null&&fe.next!==null,kn=0,me=fe=se=null,Vs=!1,e)throw Error(E(300));return t}function ku(){var t=Ci!==0;return Ci=0,t}function ht(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return me===null?se.memoizedState=me=t:me=me.next=t,me}function et(){if(fe===null){var t=se.alternate;t=t!==null?t.memoizedState:null}else t=fe.next;var e=me===null?se.memoizedState:me.next;if(e!==null)me=e,fe=t;else{if(t===null)throw Error(E(310));fe=t,t={memoizedState:fe.memoizedState,baseState:fe.baseState,baseQueue:fe.baseQueue,queue:fe.queue,next:null},me===null?se.memoizedState=me=t:me=me.next=t}return me}function Si(t,e){return typeof e=="function"?e(t):e}function dl(t){var e=et(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=fe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var c=u.lane;if((kn&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,se.lanes|=c,Nn|=c}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,dt(r,e.memoizedState)||(Ae=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,se.lanes|=s,Nn|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fl(t){var e=et(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);dt(s,e.memoizedState)||(Ae=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Qh(){}function Gh(t,e){var n=se,r=et(),i=e(),s=!dt(r.memoizedState,i);if(s&&(r.memoizedState=i,Ae=!0),r=r.queue,Nu(qh.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||me!==null&&me.memoizedState.tag&1){if(n.flags|=2048,xi(9,Yh.bind(null,n,r,i,e),void 0,null),ye===null)throw Error(E(349));kn&30||Kh(n,e,i)}return i}function Kh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=se.updateQueue,e===null?(e={lastEffect:null,stores:null},se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Yh(t,e,n,r){e.value=n,e.getSnapshot=r,Xh(e)&&Jh(t)}function qh(t,e,n){return n(function(){Xh(e)&&Jh(t)})}function Xh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dt(t,n)}catch{return!0}}function Jh(t){var e=Rt(t,1);e!==null&&ut(e,t,1,-1)}function ud(t){var e=ht();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:t},e.queue=t,t=t.dispatch=cy.bind(null,se,t),[e.memoizedState,t]}function xi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=se.updateQueue,e===null?(e={lastEffect:null,stores:null},se.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Zh(){return et().memoizedState}function Cs(t,e,n,r){var i=ht();se.flags|=t,i.memoizedState=xi(1|e,n,void 0,r===void 0?null:r)}function xo(t,e,n,r){var i=et();r=r===void 0?null:r;var s=void 0;if(fe!==null){var o=fe.memoizedState;if(s=o.destroy,r!==null&&Su(r,o.deps)){i.memoizedState=xi(e,n,s,r);return}}se.flags|=t,i.memoizedState=xi(1|e,n,s,r)}function cd(t,e){return Cs(8390656,8,t,e)}function Nu(t,e){return xo(2048,8,t,e)}function ep(t,e){return xo(4,2,t,e)}function tp(t,e){return xo(4,4,t,e)}function np(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rp(t,e,n){return n=n!=null?n.concat([t]):null,xo(4,4,np.bind(null,e,t),n)}function Tu(){}function ip(t,e){var n=et();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Su(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function sp(t,e){var n=et();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Su(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function op(t,e,n){return kn&21?(dt(n,e)||(n=dh(),se.lanes|=n,Nn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ae=!0),t.memoizedState=n)}function ay(t,e){var n=W;W=n!==0&&4>n?n:4,t(!0);var r=cl.transition;cl.transition={};try{t(!1),e()}finally{W=n,cl.transition=r}}function lp(){return et().memoizedState}function uy(t,e,n){var r=Kt(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ap(t))up(e,n);else if(n=Wh(t,e,n,r),n!==null){var i=Re();ut(n,t,r,i),cp(n,e,r)}}function cy(t,e,n){var r=Kt(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ap(t))up(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,dt(l,o)){var a=e.interleaved;a===null?(i.next=i,yu(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=Wh(t,e,i,r),n!==null&&(i=Re(),ut(n,t,r,i),cp(n,e,r))}}function ap(t){var e=t.alternate;return t===se||e!==null&&e===se}function up(t,e){ei=Vs=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function cp(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,iu(t,n)}}var Qs={readContext:Ze,useCallback:Se,useContext:Se,useEffect:Se,useImperativeHandle:Se,useInsertionEffect:Se,useLayoutEffect:Se,useMemo:Se,useReducer:Se,useRef:Se,useState:Se,useDebugValue:Se,useDeferredValue:Se,useTransition:Se,useMutableSource:Se,useSyncExternalStore:Se,useId:Se,unstable_isNewReconciler:!1},dy={readContext:Ze,useCallback:function(t,e){return ht().memoizedState=[t,e===void 0?null:e],t},useContext:Ze,useEffect:cd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Cs(4194308,4,np.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Cs(4194308,4,t,e)},useInsertionEffect:function(t,e){return Cs(4,2,t,e)},useMemo:function(t,e){var n=ht();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ht();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=uy.bind(null,se,t),[r.memoizedState,t]},useRef:function(t){var e=ht();return t={current:t},e.memoizedState=t},useState:ud,useDebugValue:Tu,useDeferredValue:function(t){return ht().memoizedState=t},useTransition:function(){var t=ud(!1),e=t[0];return t=ay.bind(null,t[1]),ht().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=se,i=ht();if(Z){if(n===void 0)throw Error(E(407));n=n()}else{if(n=e(),ye===null)throw Error(E(349));kn&30||Kh(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,cd(qh.bind(null,r,s,t),[t]),r.flags|=2048,xi(9,Yh.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ht(),e=ye.identifierPrefix;if(Z){var n=St,r=Ct;n=(r&~(1<<32-at(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ci++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ly++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},fy={readContext:Ze,useCallback:ip,useContext:Ze,useEffect:Nu,useImperativeHandle:rp,useInsertionEffect:ep,useLayoutEffect:tp,useMemo:sp,useReducer:dl,useRef:Zh,useState:function(){return dl(Si)},useDebugValue:Tu,useDeferredValue:function(t){var e=et();return op(e,fe.memoizedState,t)},useTransition:function(){var t=dl(Si)[0],e=et().memoizedState;return[t,e]},useMutableSource:Qh,useSyncExternalStore:Gh,useId:lp,unstable_isNewReconciler:!1},hy={readContext:Ze,useCallback:ip,useContext:Ze,useEffect:Nu,useImperativeHandle:rp,useInsertionEffect:ep,useLayoutEffect:tp,useMemo:sp,useReducer:fl,useRef:Zh,useState:function(){return fl(Si)},useDebugValue:Tu,useDeferredValue:function(t){var e=et();return fe===null?e.memoizedState=t:op(e,fe.memoizedState,t)},useTransition:function(){var t=fl(Si)[0],e=et().memoizedState;return[t,e]},useMutableSource:Qh,useSyncExternalStore:Gh,useId:lp,unstable_isNewReconciler:!1};function rt(t,e){if(t&&t.defaultProps){e=oe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function aa(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:oe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ko={isMounted:function(t){return(t=t._reactInternals)?An(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Re(),i=Kt(t),s=kt(r,i);s.payload=e,n!=null&&(s.callback=n),e=Qt(t,s,i),e!==null&&(ut(e,t,i,r),ws(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Re(),i=Kt(t),s=kt(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Qt(t,s,i),e!==null&&(ut(e,t,i,r),ws(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Re(),r=Kt(t),i=kt(n,r);i.tag=2,e!=null&&(i.callback=e),e=Qt(t,i,r),e!==null&&(ut(e,t,r,n),ws(e,t,r))}};function dd(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!gi(n,r)||!gi(i,s):!0}function dp(t,e,n){var r=!1,i=en,s=e.contextType;return typeof s=="object"&&s!==null?s=Ze(s):(i=be(e)?Sn:Ne.current,r=e.contextTypes,s=(r=r!=null)?dr(t,i):en),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ko,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function fd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ko.enqueueReplaceState(e,e.state,null)}function ua(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},vu(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ze(s):(s=be(e)?Sn:Ne.current,i.context=dr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(aa(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ko.enqueueReplaceState(i,i.state,null),Ws(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function mr(t,e){try{var n="",r=e;do n+=$g(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function hl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ca(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var py=typeof WeakMap=="function"?WeakMap:Map;function fp(t,e,n){n=kt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ks||(Ks=!0,wa=r),ca(t,e)},n}function hp(t,e,n){n=kt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ca(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ca(t,e),typeof r!="function"&&(Gt===null?Gt=new Set([this]):Gt.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function hd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new py;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Iy.bind(null,t,e,n),e.then(t,t))}function pd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function md(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=kt(-1,1),e.tag=2,Qt(n,e,1))),n.lanes|=1),t)}var my=Mt.ReactCurrentOwner,Ae=!1;function Ie(t,e,n,r){e.child=t===null?Bh(e,null,n,r):hr(e,t.child,n,r)}function gd(t,e,n,r,i){n=n.render;var s=e.ref;return ir(e,i),r=xu(t,e,n,r,s,i),n=ku(),t!==null&&!Ae?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pt(t,e,i)):(Z&&n&&fu(e),e.flags|=1,Ie(t,e,r,i),e.child)}function _d(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Lu(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,pp(t,e,s,r,i)):(t=Ns(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:gi,n(o,r)&&t.ref===e.ref)return Pt(t,e,i)}return e.flags|=1,t=Yt(s,r),t.ref=e.ref,t.return=e,e.child=t}function pp(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(gi(s,r)&&t.ref===e.ref)if(Ae=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ae=!0);else return e.lanes=t.lanes,Pt(t,e,i)}return da(t,e,n,r,i)}function mp(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},K(Jn,$e),$e|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,K(Jn,$e),$e|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,K(Jn,$e),$e|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,K(Jn,$e),$e|=r;return Ie(t,e,i,n),e.child}function gp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function da(t,e,n,r,i){var s=be(n)?Sn:Ne.current;return s=dr(e,s),ir(e,i),n=xu(t,e,n,r,s,i),r=ku(),t!==null&&!Ae?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pt(t,e,i)):(Z&&r&&fu(e),e.flags|=1,Ie(t,e,n,i),e.child)}function yd(t,e,n,r,i){if(be(n)){var s=!0;js(e)}else s=!1;if(ir(e,i),e.stateNode===null)Ss(t,e),dp(e,n,r),ua(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ze(u):(u=be(n)?Sn:Ne.current,u=dr(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&fd(e,o,r,u),bt=!1;var f=e.memoizedState;o.state=f,Ws(e,r,o,i),a=e.memoizedState,l!==r||f!==a||Fe.current||bt?(typeof c=="function"&&(aa(e,n,c,r),a=e.memoizedState),(l=bt||dd(e,n,l,r,f,a,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Hh(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:rt(e.type,l),o.props=u,d=e.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=Ze(a):(a=be(n)?Sn:Ne.current,a=dr(e,a));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==a)&&fd(e,o,r,a),bt=!1,f=e.memoizedState,o.state=f,Ws(e,r,o,i);var _=e.memoizedState;l!==d||f!==_||Fe.current||bt?(typeof m=="function"&&(aa(e,n,m,r),_=e.memoizedState),(u=bt||dd(e,n,u,r,f,_,a)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return fa(t,e,n,r,s,i)}function fa(t,e,n,r,i,s){gp(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&rd(e,n,!1),Pt(t,e,s);r=e.stateNode,my.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=hr(e,t.child,null,s),e.child=hr(e,null,l,s)):Ie(t,e,l,s),e.memoizedState=r.state,i&&rd(e,n,!0),e.child}function _p(t){var e=t.stateNode;e.pendingContext?nd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&nd(t,e.context,!1),wu(t,e.containerInfo)}function vd(t,e,n,r,i){return fr(),pu(i),e.flags|=256,Ie(t,e,n,r),e.child}var ha={dehydrated:null,treeContext:null,retryLane:0};function pa(t){return{baseLanes:t,cachePool:null,transitions:null}}function yp(t,e,n){var r=e.pendingProps,i=re.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),K(re,i&1),t===null)return oa(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Io(o,r,0,null),t=Cn(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=pa(n),e.memoizedState=ha,t):Iu(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return gy(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Yt(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Yt(l,s):(s=Cn(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?pa(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=ha,r}return s=t.child,t=s.sibling,r=Yt(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Iu(t,e){return e=Io({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function us(t,e,n,r){return r!==null&&pu(r),hr(e,t.child,null,n),t=Iu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gy(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=hl(Error(E(422))),us(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Io({mode:"visible",children:r.children},i,0,null),s=Cn(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&hr(e,t.child,null,o),e.child.memoizedState=pa(o),e.memoizedState=ha,s);if(!(e.mode&1))return us(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(E(419)),r=hl(s,r,void 0),us(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ae||l){if(r=ye,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Rt(t,i),ut(r,t,i,-1))}return Mu(),r=hl(Error(E(421))),us(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Ry.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Be=Vt(i.nextSibling),He=e,Z=!0,st=null,t!==null&&(Ke[Ye++]=Ct,Ke[Ye++]=St,Ke[Ye++]=xn,Ct=t.id,St=t.overflow,xn=e),e=Iu(e,r.children),e.flags|=4096,e)}function wd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),la(t.return,e,n)}function pl(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function vp(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ie(t,e,r.children,n),r=re.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wd(t,n,e);else if(t.tag===19)wd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(K(re,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Hs(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),pl(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Hs(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}pl(e,!0,n,null,s);break;case"together":pl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ss(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Nn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(E(153));if(e.child!==null){for(t=e.child,n=Yt(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Yt(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _y(t,e,n){switch(e.tag){case 3:_p(e),fr();break;case 5:Vh(e);break;case 1:be(e.type)&&js(e);break;case 4:wu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;K($s,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(K(re,re.current&1),e.flags|=128,null):n&e.child.childLanes?yp(t,e,n):(K(re,re.current&1),t=Pt(t,e,n),t!==null?t.sibling:null);K(re,re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return vp(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),K(re,re.current),r)break;return null;case 22:case 23:return e.lanes=0,mp(t,e,n)}return Pt(t,e,n)}var wp,ma,Ep,Cp;wp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ma=function(){};Ep=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,_n(gt.current);var s=null;switch(n){case"input":i=bl(t,i),r=bl(t,r),s=[];break;case"select":i=oe({},i,{value:void 0}),r=oe({},r,{value:void 0}),s=[];break;case"textarea":i=Ul(t,i),r=Ul(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Fs)}Bl(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ui.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ui.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&Y("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Cp=function(t,e,n,r){n!==r&&(e.flags|=4)};function jr(t,e){if(!Z)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function yy(t,e,n){var r=e.pendingProps;switch(hu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xe(e),null;case 1:return be(e.type)&&bs(),xe(e),null;case 3:return r=e.stateNode,pr(),X(Fe),X(Ne),Cu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ls(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,st!==null&&(Sa(st),st=null))),ma(t,e),xe(e),null;case 5:Eu(e);var i=_n(Ei.current);if(n=e.type,t!==null&&e.stateNode!=null)Ep(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(E(166));return xe(e),null}if(t=_n(gt.current),ls(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[pt]=e,r[vi]=s,t=(e.mode&1)!==0,n){case"dialog":Y("cancel",r),Y("close",r);break;case"iframe":case"object":case"embed":Y("load",r);break;case"video":case"audio":for(i=0;i<Kr.length;i++)Y(Kr[i],r);break;case"source":Y("error",r);break;case"img":case"image":case"link":Y("error",r),Y("load",r);break;case"details":Y("toggle",r);break;case"input":Rc(r,s),Y("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Y("invalid",r);break;case"textarea":Dc(r,s),Y("invalid",r)}Bl(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&os(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&os(r.textContent,l,t),i=["children",""+l]):ui.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Y("scroll",r)}switch(n){case"input":Ji(r),Pc(r,s,!0);break;case"textarea":Ji(r),Oc(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Fs)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[pt]=e,t[vi]=r,wp(t,e,!1,!1),e.stateNode=t;e:{switch(o=Wl(n,r),n){case"dialog":Y("cancel",t),Y("close",t),i=r;break;case"iframe":case"object":case"embed":Y("load",t),i=r;break;case"video":case"audio":for(i=0;i<Kr.length;i++)Y(Kr[i],t);i=r;break;case"source":Y("error",t),i=r;break;case"img":case"image":case"link":Y("error",t),Y("load",t),i=r;break;case"details":Y("toggle",t),i=r;break;case"input":Rc(t,r),i=bl(t,r),Y("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=oe({},r,{value:void 0}),Y("invalid",t);break;case"textarea":Dc(t,r),i=Ul(t,r),Y("invalid",t);break;default:i=r}Bl(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?Zf(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Xf(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&ci(t,a):typeof a=="number"&&ci(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ui.hasOwnProperty(s)?a!=null&&s==="onScroll"&&Y("scroll",t):a!=null&&Ja(t,s,a,o))}switch(n){case"input":Ji(t),Pc(t,r,!1);break;case"textarea":Ji(t),Oc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zt(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?er(t,!!r.multiple,s,!1):r.defaultValue!=null&&er(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Fs)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xe(e),null;case 6:if(t&&e.stateNode!=null)Cp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(E(166));if(n=_n(Ei.current),_n(gt.current),ls(e)){if(r=e.stateNode,n=e.memoizedProps,r[pt]=e,(s=r.nodeValue!==n)&&(t=He,t!==null))switch(t.tag){case 3:os(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&os(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pt]=e,e.stateNode=r}return xe(e),null;case 13:if(X(re),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Z&&Be!==null&&e.mode&1&&!(e.flags&128))Uh(),fr(),e.flags|=98560,s=!1;else if(s=ls(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(E(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(E(317));s[pt]=e}else fr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xe(e),s=!1}else st!==null&&(Sa(st),st=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||re.current&1?he===0&&(he=3):Mu())),e.updateQueue!==null&&(e.flags|=4),xe(e),null);case 4:return pr(),ma(t,e),t===null&&_i(e.stateNode.containerInfo),xe(e),null;case 10:return _u(e.type._context),xe(e),null;case 17:return be(e.type)&&bs(),xe(e),null;case 19:if(X(re),s=e.memoizedState,s===null)return xe(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)jr(s,!1);else{if(he!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Hs(t),o!==null){for(e.flags|=128,jr(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return K(re,re.current&1|2),e.child}t=t.sibling}s.tail!==null&&ae()>gr&&(e.flags|=128,r=!0,jr(s,!1),e.lanes=4194304)}else{if(!r)if(t=Hs(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),jr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Z)return xe(e),null}else 2*ae()-s.renderingStartTime>gr&&n!==1073741824&&(e.flags|=128,r=!0,jr(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ae(),e.sibling=null,n=re.current,K(re,r?n&1|2:n&1),e):(xe(e),null);case 22:case 23:return Au(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$e&1073741824&&(xe(e),e.subtreeFlags&6&&(e.flags|=8192)):xe(e),null;case 24:return null;case 25:return null}throw Error(E(156,e.tag))}function vy(t,e){switch(hu(e),e.tag){case 1:return be(e.type)&&bs(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pr(),X(Fe),X(Ne),Cu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Eu(e),null;case 13:if(X(re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(E(340));fr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return X(re),null;case 4:return pr(),null;case 10:return _u(e.type._context),null;case 22:case 23:return Au(),null;case 24:return null;default:return null}}var cs=!1,ke=!1,wy=typeof WeakSet=="function"?WeakSet:Set,N=null;function Xn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){le(t,e,r)}else n.current=null}function ga(t,e,n){try{n()}catch(r){le(t,e,r)}}var Ed=!1;function Ey(t,e){if(Zl=As,t=Th(),du(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++u===i&&(l=o),f===s&&++c===r&&(a=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(ea={focusedElem:t,selectionRange:n},As=!1,N=e;N!==null;)if(e=N,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,N=t;else for(;N!==null;){e=N;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var w=_.memoizedProps,T=_.memoizedState,p=e.stateNode,h=p.getSnapshotBeforeUpdate(e.elementType===e.type?w:rt(e.type,w),T);p.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(y){le(e,e.return,y)}if(t=e.sibling,t!==null){t.return=e.return,N=t;break}N=e.return}return _=Ed,Ed=!1,_}function ti(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ga(e,n,s)}i=i.next}while(i!==r)}}function No(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function _a(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Sp(t){var e=t.alternate;e!==null&&(t.alternate=null,Sp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pt],delete e[vi],delete e[ra],delete e[ry],delete e[iy])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xp(t){return t.tag===5||t.tag===3||t.tag===4}function Cd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ya(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Fs));else if(r!==4&&(t=t.child,t!==null))for(ya(t,e,n),t=t.sibling;t!==null;)ya(t,e,n),t=t.sibling}function va(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(va(t,e,n),t=t.sibling;t!==null;)va(t,e,n),t=t.sibling}var ve=null,it=!1;function Lt(t,e,n){for(n=n.child;n!==null;)kp(t,e,n),n=n.sibling}function kp(t,e,n){if(mt&&typeof mt.onCommitFiberUnmount=="function")try{mt.onCommitFiberUnmount(yo,n)}catch{}switch(n.tag){case 5:ke||Xn(n,e);case 6:var r=ve,i=it;ve=null,Lt(t,e,n),ve=r,it=i,ve!==null&&(it?(t=ve,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ve.removeChild(n.stateNode));break;case 18:ve!==null&&(it?(t=ve,n=n.stateNode,t.nodeType===8?ll(t.parentNode,n):t.nodeType===1&&ll(t,n),pi(t)):ll(ve,n.stateNode));break;case 4:r=ve,i=it,ve=n.stateNode.containerInfo,it=!0,Lt(t,e,n),ve=r,it=i;break;case 0:case 11:case 14:case 15:if(!ke&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ga(n,e,o),i=i.next}while(i!==r)}Lt(t,e,n);break;case 1:if(!ke&&(Xn(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){le(n,e,l)}Lt(t,e,n);break;case 21:Lt(t,e,n);break;case 22:n.mode&1?(ke=(r=ke)||n.memoizedState!==null,Lt(t,e,n),ke=r):Lt(t,e,n);break;default:Lt(t,e,n)}}function Sd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wy),e.forEach(function(r){var i=Py.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function nt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ve=l.stateNode,it=!1;break e;case 3:ve=l.stateNode.containerInfo,it=!0;break e;case 4:ve=l.stateNode.containerInfo,it=!0;break e}l=l.return}if(ve===null)throw Error(E(160));kp(s,o,i),ve=null,it=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){le(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Np(e,t),e=e.sibling}function Np(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nt(e,t),ft(t),r&4){try{ti(3,t,t.return),No(3,t)}catch(w){le(t,t.return,w)}try{ti(5,t,t.return)}catch(w){le(t,t.return,w)}}break;case 1:nt(e,t),ft(t),r&512&&n!==null&&Xn(n,n.return);break;case 5:if(nt(e,t),ft(t),r&512&&n!==null&&Xn(n,n.return),t.flags&32){var i=t.stateNode;try{ci(i,"")}catch(w){le(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Kf(i,s),Wl(l,o);var u=Wl(l,s);for(o=0;o<a.length;o+=2){var c=a[o],d=a[o+1];c==="style"?Zf(i,d):c==="dangerouslySetInnerHTML"?Xf(i,d):c==="children"?ci(i,d):Ja(i,c,d,u)}switch(l){case"input":jl(i,s);break;case"textarea":Yf(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?er(i,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?er(i,!!s.multiple,s.defaultValue,!0):er(i,!!s.multiple,s.multiple?[]:"",!1))}i[vi]=s}catch(w){le(t,t.return,w)}}break;case 6:if(nt(e,t),ft(t),r&4){if(t.stateNode===null)throw Error(E(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){le(t,t.return,w)}}break;case 3:if(nt(e,t),ft(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{pi(e.containerInfo)}catch(w){le(t,t.return,w)}break;case 4:nt(e,t),ft(t);break;case 13:nt(e,t),ft(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Du=ae())),r&4&&Sd(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(ke=(u=ke)||c,nt(e,t),ke=u):nt(e,t),ft(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(N=t,c=t.child;c!==null;){for(d=N=c;N!==null;){switch(f=N,m=f.child,f.tag){case 0:case 11:case 14:case 15:ti(4,f,f.return);break;case 1:Xn(f,f.return);var _=f.stateNode;if(typeof _.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(w){le(r,n,w)}}break;case 5:Xn(f,f.return);break;case 22:if(f.memoizedState!==null){kd(d);continue}}m!==null?(m.return=f,N=m):kd(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Jf("display",o))}catch(w){le(t,t.return,w)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(w){le(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:nt(e,t),ft(t),r&4&&Sd(t);break;case 21:break;default:nt(e,t),ft(t)}}function ft(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(xp(n)){var r=n;break e}n=n.return}throw Error(E(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ci(i,""),r.flags&=-33);var s=Cd(t);va(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Cd(t);ya(t,l,o);break;default:throw Error(E(161))}}catch(a){le(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Cy(t,e,n){N=t,Tp(t)}function Tp(t,e,n){for(var r=(t.mode&1)!==0;N!==null;){var i=N,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||cs;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||ke;l=cs;var u=ke;if(cs=o,(ke=a)&&!u)for(N=i;N!==null;)o=N,a=o.child,o.tag===22&&o.memoizedState!==null?Nd(i):a!==null?(a.return=o,N=a):Nd(i);for(;s!==null;)N=s,Tp(s),s=s.sibling;N=i,cs=l,ke=u}xd(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,N=s):xd(t)}}function xd(t){for(;N!==null;){var e=N;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ke||No(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ke)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:rt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ad(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ad(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&pi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}ke||e.flags&512&&_a(e)}catch(f){le(e,e.return,f)}}if(e===t){N=null;break}if(n=e.sibling,n!==null){n.return=e.return,N=n;break}N=e.return}}function kd(t){for(;N!==null;){var e=N;if(e===t){N=null;break}var n=e.sibling;if(n!==null){n.return=e.return,N=n;break}N=e.return}}function Nd(t){for(;N!==null;){var e=N;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{No(4,e)}catch(a){le(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){le(e,i,a)}}var s=e.return;try{_a(e)}catch(a){le(e,s,a)}break;case 5:var o=e.return;try{_a(e)}catch(a){le(e,o,a)}}}catch(a){le(e,e.return,a)}if(e===t){N=null;break}var l=e.sibling;if(l!==null){l.return=e.return,N=l;break}N=e.return}}var Sy=Math.ceil,Gs=Mt.ReactCurrentDispatcher,Ru=Mt.ReactCurrentOwner,Je=Mt.ReactCurrentBatchConfig,$=0,ye=null,de=null,Ee=0,$e=0,Jn=sn(0),he=0,ki=null,Nn=0,To=0,Pu=0,ni=null,Oe=null,Du=0,gr=1/0,vt=null,Ks=!1,wa=null,Gt=null,ds=!1,$t=null,Ys=0,ri=0,Ea=null,xs=-1,ks=0;function Re(){return $&6?ae():xs!==-1?xs:xs=ae()}function Kt(t){return t.mode&1?$&2&&Ee!==0?Ee&-Ee:oy.transition!==null?(ks===0&&(ks=dh()),ks):(t=W,t!==0||(t=window.event,t=t===void 0?16:yh(t.type)),t):1}function ut(t,e,n,r){if(50<ri)throw ri=0,Ea=null,Error(E(185));ji(t,n,r),(!($&2)||t!==ye)&&(t===ye&&(!($&2)&&(To|=n),he===4&&zt(t,Ee)),je(t,r),n===1&&$===0&&!(e.mode&1)&&(gr=ae()+500,So&&on()))}function je(t,e){var n=t.callbackNode;o_(t,e);var r=Os(t,t===ye?Ee:0);if(r===0)n!==null&&Lc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Lc(n),e===1)t.tag===0?sy(Td.bind(null,t)):bh(Td.bind(null,t)),ty(function(){!($&6)&&on()}),n=null;else{switch(fh(r)){case 1:n=ru;break;case 4:n=uh;break;case 16:n=Ds;break;case 536870912:n=ch;break;default:n=Ds}n=Lp(n,Ip.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ip(t,e){if(xs=-1,ks=0,$&6)throw Error(E(327));var n=t.callbackNode;if(sr()&&t.callbackNode!==n)return null;var r=Os(t,t===ye?Ee:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=qs(t,r);else{e=r;var i=$;$|=2;var s=Pp();(ye!==t||Ee!==e)&&(vt=null,gr=ae()+500,En(t,e));do try{Ny();break}catch(l){Rp(t,l)}while(!0);gu(),Gs.current=s,$=i,de!==null?e=0:(ye=null,Ee=0,e=he)}if(e!==0){if(e===2&&(i=Kl(t),i!==0&&(r=i,e=Ca(t,i))),e===1)throw n=ki,En(t,0),zt(t,r),je(t,ae()),n;if(e===6)zt(t,r);else{if(i=t.current.alternate,!(r&30)&&!xy(i)&&(e=qs(t,r),e===2&&(s=Kl(t),s!==0&&(r=s,e=Ca(t,s))),e===1))throw n=ki,En(t,0),zt(t,r),je(t,ae()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(E(345));case 2:fn(t,Oe,vt);break;case 3:if(zt(t,r),(r&130023424)===r&&(e=Du+500-ae(),10<e)){if(Os(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Re(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=na(fn.bind(null,t,Oe,vt),e);break}fn(t,Oe,vt);break;case 4:if(zt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-at(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ae()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sy(r/1960))-r,10<r){t.timeoutHandle=na(fn.bind(null,t,Oe,vt),r);break}fn(t,Oe,vt);break;case 5:fn(t,Oe,vt);break;default:throw Error(E(329))}}}return je(t,ae()),t.callbackNode===n?Ip.bind(null,t):null}function Ca(t,e){var n=ni;return t.current.memoizedState.isDehydrated&&(En(t,e).flags|=256),t=qs(t,e),t!==2&&(e=Oe,Oe=n,e!==null&&Sa(e)),t}function Sa(t){Oe===null?Oe=t:Oe.push.apply(Oe,t)}function xy(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!dt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zt(t,e){for(e&=~Pu,e&=~To,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-at(e),r=1<<n;t[n]=-1,e&=~r}}function Td(t){if($&6)throw Error(E(327));sr();var e=Os(t,0);if(!(e&1))return je(t,ae()),null;var n=qs(t,e);if(t.tag!==0&&n===2){var r=Kl(t);r!==0&&(e=r,n=Ca(t,r))}if(n===1)throw n=ki,En(t,0),zt(t,e),je(t,ae()),n;if(n===6)throw Error(E(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fn(t,Oe,vt),je(t,ae()),null}function Ou(t,e){var n=$;$|=1;try{return t(e)}finally{$=n,$===0&&(gr=ae()+500,So&&on())}}function Tn(t){$t!==null&&$t.tag===0&&!($&6)&&sr();var e=$;$|=1;var n=Je.transition,r=W;try{if(Je.transition=null,W=1,t)return t()}finally{W=r,Je.transition=n,$=e,!($&6)&&on()}}function Au(){$e=Jn.current,X(Jn)}function En(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ey(n)),de!==null)for(n=de.return;n!==null;){var r=n;switch(hu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bs();break;case 3:pr(),X(Fe),X(Ne),Cu();break;case 5:Eu(r);break;case 4:pr();break;case 13:X(re);break;case 19:X(re);break;case 10:_u(r.type._context);break;case 22:case 23:Au()}n=n.return}if(ye=t,de=t=Yt(t.current,null),Ee=$e=e,he=0,ki=null,Pu=To=Nn=0,Oe=ni=null,gn!==null){for(e=0;e<gn.length;e++)if(n=gn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}gn=null}return t}function Rp(t,e){do{var n=de;try{if(gu(),Es.current=Qs,Vs){for(var r=se.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Vs=!1}if(kn=0,me=fe=se=null,ei=!1,Ci=0,Ru.current=null,n===null||n.return===null){he=1,ki=e,de=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=Ee,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=pd(o);if(m!==null){m.flags&=-257,md(m,o,l,s,e),m.mode&1&&hd(s,u,e),e=m,a=u;var _=e.updateQueue;if(_===null){var w=new Set;w.add(a),e.updateQueue=w}else _.add(a);break e}else{if(!(e&1)){hd(s,u,e),Mu();break e}a=Error(E(426))}}else if(Z&&l.mode&1){var T=pd(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),md(T,o,l,s,e),pu(mr(a,l));break e}}s=a=mr(a,l),he!==4&&(he=2),ni===null?ni=[s]:ni.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=fp(s,a,e);ld(s,p);break e;case 1:l=a;var h=s.type,g=s.stateNode;if(!(s.flags&128)&&(typeof h.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Gt===null||!Gt.has(g)))){s.flags|=65536,e&=-e,s.lanes|=e;var y=hp(s,l,e);ld(s,y);break e}}s=s.return}while(s!==null)}Op(n)}catch(x){e=x,de===n&&n!==null&&(de=n=n.return);continue}break}while(!0)}function Pp(){var t=Gs.current;return Gs.current=Qs,t===null?Qs:t}function Mu(){(he===0||he===3||he===2)&&(he=4),ye===null||!(Nn&268435455)&&!(To&268435455)||zt(ye,Ee)}function qs(t,e){var n=$;$|=2;var r=Pp();(ye!==t||Ee!==e)&&(vt=null,En(t,e));do try{ky();break}catch(i){Rp(t,i)}while(!0);if(gu(),$=n,Gs.current=r,de!==null)throw Error(E(261));return ye=null,Ee=0,he}function ky(){for(;de!==null;)Dp(de)}function Ny(){for(;de!==null&&!Xg();)Dp(de)}function Dp(t){var e=Mp(t.alternate,t,$e);t.memoizedProps=t.pendingProps,e===null?Op(t):de=e,Ru.current=null}function Op(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=vy(n,e),n!==null){n.flags&=32767,de=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{he=6,de=null;return}}else if(n=yy(n,e,$e),n!==null){de=n;return}if(e=e.sibling,e!==null){de=e;return}de=e=t}while(e!==null);he===0&&(he=5)}function fn(t,e,n){var r=W,i=Je.transition;try{Je.transition=null,W=1,Ty(t,e,n,r)}finally{Je.transition=i,W=r}return null}function Ty(t,e,n,r){do sr();while($t!==null);if($&6)throw Error(E(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(E(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(l_(t,s),t===ye&&(de=ye=null,Ee=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ds||(ds=!0,Lp(Ds,function(){return sr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Je.transition,Je.transition=null;var o=W;W=1;var l=$;$|=4,Ru.current=null,Ey(t,n),Np(n,t),G_(ea),As=!!Zl,ea=Zl=null,t.current=n,Cy(n),Jg(),$=l,W=o,Je.transition=s}else t.current=n;if(ds&&(ds=!1,$t=t,Ys=i),s=t.pendingLanes,s===0&&(Gt=null),t_(n.stateNode),je(t,ae()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,t=wa,wa=null,t;return Ys&1&&t.tag!==0&&sr(),s=t.pendingLanes,s&1?t===Ea?ri++:(ri=0,Ea=t):ri=0,on(),null}function sr(){if($t!==null){var t=fh(Ys),e=Je.transition,n=W;try{if(Je.transition=null,W=16>t?16:t,$t===null)var r=!1;else{if(t=$t,$t=null,Ys=0,$&6)throw Error(E(331));var i=$;for($|=4,N=t.current;N!==null;){var s=N,o=s.child;if(N.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(N=u;N!==null;){var c=N;switch(c.tag){case 0:case 11:case 15:ti(8,c,s)}var d=c.child;if(d!==null)d.return=c,N=d;else for(;N!==null;){c=N;var f=c.sibling,m=c.return;if(Sp(c),c===u){N=null;break}if(f!==null){f.return=m,N=f;break}N=m}}}var _=s.alternate;if(_!==null){var w=_.child;if(w!==null){_.child=null;do{var T=w.sibling;w.sibling=null,w=T}while(w!==null)}}N=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,N=o;else e:for(;N!==null;){if(s=N,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ti(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,N=p;break e}N=s.return}}var h=t.current;for(N=h;N!==null;){o=N;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,N=g;else e:for(o=h;N!==null;){if(l=N,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:No(9,l)}}catch(x){le(l,l.return,x)}if(l===o){N=null;break e}var y=l.sibling;if(y!==null){y.return=l.return,N=y;break e}N=l.return}}if($=i,on(),mt&&typeof mt.onPostCommitFiberRoot=="function")try{mt.onPostCommitFiberRoot(yo,t)}catch{}r=!0}return r}finally{W=n,Je.transition=e}}return!1}function Id(t,e,n){e=mr(n,e),e=fp(t,e,1),t=Qt(t,e,1),e=Re(),t!==null&&(ji(t,1,e),je(t,e))}function le(t,e,n){if(t.tag===3)Id(t,t,n);else for(;e!==null;){if(e.tag===3){Id(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Gt===null||!Gt.has(r))){t=mr(n,t),t=hp(e,t,1),e=Qt(e,t,1),t=Re(),e!==null&&(ji(e,1,t),je(e,t));break}}e=e.return}}function Iy(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Re(),t.pingedLanes|=t.suspendedLanes&n,ye===t&&(Ee&n)===n&&(he===4||he===3&&(Ee&130023424)===Ee&&500>ae()-Du?En(t,0):Pu|=n),je(t,e)}function Ap(t,e){e===0&&(t.mode&1?(e=ts,ts<<=1,!(ts&130023424)&&(ts=4194304)):e=1);var n=Re();t=Rt(t,e),t!==null&&(ji(t,e,n),je(t,n))}function Ry(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ap(t,n)}function Py(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(e),Ap(t,n)}var Mp;Mp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Fe.current)Ae=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ae=!1,_y(t,e,n);Ae=!!(t.flags&131072)}else Ae=!1,Z&&e.flags&1048576&&jh(e,Us,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ss(t,e),t=e.pendingProps;var i=dr(e,Ne.current);ir(e,n),i=xu(null,e,r,t,i,n);var s=ku();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,be(r)?(s=!0,js(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,vu(e),i.updater=ko,e.stateNode=i,i._reactInternals=e,ua(e,r,t,n),e=fa(null,e,r,!0,s,n)):(e.tag=0,Z&&s&&fu(e),Ie(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ss(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Oy(r),t=rt(r,t),i){case 0:e=da(null,e,r,t,n);break e;case 1:e=yd(null,e,r,t,n);break e;case 11:e=gd(null,e,r,t,n);break e;case 14:e=_d(null,e,r,rt(r.type,t),n);break e}throw Error(E(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rt(r,i),da(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rt(r,i),yd(t,e,r,i,n);case 3:e:{if(_p(e),t===null)throw Error(E(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Hh(t,e),Ws(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=mr(Error(E(423)),e),e=vd(t,e,r,n,i);break e}else if(r!==i){i=mr(Error(E(424)),e),e=vd(t,e,r,n,i);break e}else for(Be=Vt(e.stateNode.containerInfo.firstChild),He=e,Z=!0,st=null,n=Bh(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fr(),r===i){e=Pt(t,e,n);break e}Ie(t,e,r,n)}e=e.child}return e;case 5:return Vh(e),t===null&&oa(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,ta(r,i)?o=null:s!==null&&ta(r,s)&&(e.flags|=32),gp(t,e),Ie(t,e,o,n),e.child;case 6:return t===null&&oa(e),null;case 13:return yp(t,e,n);case 4:return wu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=hr(e,null,r,n):Ie(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rt(r,i),gd(t,e,r,i,n);case 7:return Ie(t,e,e.pendingProps,n),e.child;case 8:return Ie(t,e,e.pendingProps.children,n),e.child;case 12:return Ie(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,K($s,r._currentValue),r._currentValue=o,s!==null)if(dt(s.value,o)){if(s.children===i.children&&!Fe.current){e=Pt(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=kt(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),la(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(E(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),la(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ie(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ir(e,n),i=Ze(i),r=r(i),e.flags|=1,Ie(t,e,r,n),e.child;case 14:return r=e.type,i=rt(r,e.pendingProps),i=rt(r.type,i),_d(t,e,r,i,n);case 15:return pp(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rt(r,i),Ss(t,e),e.tag=1,be(r)?(t=!0,js(e)):t=!1,ir(e,n),dp(e,r,i),ua(e,r,i,n),fa(null,e,r,!0,t,n);case 19:return vp(t,e,n);case 22:return mp(t,e,n)}throw Error(E(156,e.tag))};function Lp(t,e){return ah(t,e)}function Dy(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qe(t,e,n,r){return new Dy(t,e,n,r)}function Lu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Oy(t){if(typeof t=="function")return Lu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===eu)return 11;if(t===tu)return 14}return 2}function Yt(t,e){var n=t.alternate;return n===null?(n=qe(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ns(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Lu(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Bn:return Cn(n.children,i,s,e);case Za:o=8,i|=8;break;case Al:return t=qe(12,n,e,i|2),t.elementType=Al,t.lanes=s,t;case Ml:return t=qe(13,n,e,i),t.elementType=Ml,t.lanes=s,t;case Ll:return t=qe(19,n,e,i),t.elementType=Ll,t.lanes=s,t;case Vf:return Io(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Wf:o=10;break e;case Hf:o=9;break e;case eu:o=11;break e;case tu:o=14;break e;case Ft:o=16,r=null;break e}throw Error(E(130,t==null?t:typeof t,""))}return e=qe(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Cn(t,e,n,r){return t=qe(7,t,r,e),t.lanes=n,t}function Io(t,e,n,r){return t=qe(22,t,r,e),t.elementType=Vf,t.lanes=n,t.stateNode={isHidden:!1},t}function ml(t,e,n){return t=qe(6,t,null,e),t.lanes=n,t}function gl(t,e,n){return e=qe(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ay(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qo(0),this.expirationTimes=qo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qo(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fu(t,e,n,r,i,s,o,l,a){return t=new Ay(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=qe(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vu(s),t}function My(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$n,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Fp(t){if(!t)return en;t=t._reactInternals;e:{if(An(t)!==t||t.tag!==1)throw Error(E(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(be(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(E(171))}if(t.tag===1){var n=t.type;if(be(n))return Fh(t,n,e)}return e}function bp(t,e,n,r,i,s,o,l,a){return t=Fu(n,r,!0,t,i,s,o,l,a),t.context=Fp(null),n=t.current,r=Re(),i=Kt(n),s=kt(r,i),s.callback=e??null,Qt(n,s,i),t.current.lanes=i,ji(t,i,r),je(t,r),t}function Ro(t,e,n,r){var i=e.current,s=Re(),o=Kt(i);return n=Fp(n),e.context===null?e.context=n:e.pendingContext=n,e=kt(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Qt(i,e,o),t!==null&&(ut(t,i,o,s),ws(t,i,o)),o}function Xs(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Rd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function bu(t,e){Rd(t,e),(t=t.alternate)&&Rd(t,e)}function Ly(){return null}var jp=typeof reportError=="function"?reportError:function(t){console.error(t)};function ju(t){this._internalRoot=t}Po.prototype.render=ju.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(E(409));Ro(t,e,null,null)};Po.prototype.unmount=ju.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Tn(function(){Ro(null,t,null,null)}),e[It]=null}};function Po(t){this._internalRoot=t}Po.prototype.unstable_scheduleHydration=function(t){if(t){var e=mh();t={blockedOn:null,target:t,priority:e};for(var n=0;n<jt.length&&e!==0&&e<jt[n].priority;n++);jt.splice(n,0,t),n===0&&_h(t)}};function zu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Do(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Pd(){}function Fy(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Xs(o);s.call(u)}}var o=bp(e,r,t,0,null,!1,!1,"",Pd);return t._reactRootContainer=o,t[It]=o.current,_i(t.nodeType===8?t.parentNode:t),Tn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Xs(a);l.call(u)}}var a=Fu(t,0,!1,null,null,!1,!1,"",Pd);return t._reactRootContainer=a,t[It]=a.current,_i(t.nodeType===8?t.parentNode:t),Tn(function(){Ro(e,a,n,r)}),a}function Oo(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=Xs(o);l.call(a)}}Ro(e,o,t,i)}else o=Fy(n,e,t,i,r);return Xs(o)}hh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Gr(e.pendingLanes);n!==0&&(iu(e,n|1),je(e,ae()),!($&6)&&(gr=ae()+500,on()))}break;case 13:Tn(function(){var r=Rt(t,1);if(r!==null){var i=Re();ut(r,t,1,i)}}),bu(t,1)}};su=function(t){if(t.tag===13){var e=Rt(t,134217728);if(e!==null){var n=Re();ut(e,t,134217728,n)}bu(t,134217728)}};ph=function(t){if(t.tag===13){var e=Kt(t),n=Rt(t,e);if(n!==null){var r=Re();ut(n,t,e,r)}bu(t,e)}};mh=function(){return W};gh=function(t,e){var n=W;try{return W=t,e()}finally{W=n}};Vl=function(t,e,n){switch(e){case"input":if(jl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Co(r);if(!i)throw Error(E(90));Gf(r),jl(r,i)}}}break;case"textarea":Yf(t,n);break;case"select":e=n.value,e!=null&&er(t,!!n.multiple,e,!1)}};nh=Ou;rh=Tn;var by={usingClientEntryPoint:!1,Events:[Ui,Qn,Co,eh,th,Ou]},zr={findFiberByHostInstance:mn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jy={bundleType:zr.bundleType,version:zr.version,rendererPackageName:zr.rendererPackageName,rendererConfig:zr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=oh(t),t===null?null:t.stateNode},findFiberByHostInstance:zr.findFiberByHostInstance||Ly,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fs.isDisabled&&fs.supportsFiber)try{yo=fs.inject(jy),mt=fs}catch{}}Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=by;Qe.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zu(e))throw Error(E(200));return My(t,e,null,n)};Qe.createRoot=function(t,e){if(!zu(t))throw Error(E(299));var n=!1,r="",i=jp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Fu(t,1,!1,null,null,n,!1,r,i),t[It]=e.current,_i(t.nodeType===8?t.parentNode:t),new ju(e)};Qe.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(E(188)):(t=Object.keys(t).join(","),Error(E(268,t)));return t=oh(e),t=t===null?null:t.stateNode,t};Qe.flushSync=function(t){return Tn(t)};Qe.hydrate=function(t,e,n){if(!Do(e))throw Error(E(200));return Oo(null,t,e,!0,n)};Qe.hydrateRoot=function(t,e,n){if(!zu(t))throw Error(E(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=jp;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=bp(e,null,t,1,n??null,i,!1,s,o),t[It]=e.current,_i(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Po(e)};Qe.render=function(t,e,n){if(!Do(e))throw Error(E(200));return Oo(null,t,e,!1,n)};Qe.unmountComponentAtNode=function(t){if(!Do(t))throw Error(E(40));return t._reactRootContainer?(Tn(function(){Oo(null,null,t,!1,function(){t._reactRootContainer=null,t[It]=null})}),!0):!1};Qe.unstable_batchedUpdates=Ou;Qe.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Do(n))throw Error(E(200));if(t==null||t._reactInternals===void 0)throw Error(E(38));return Oo(t,e,n,!1,r)};Qe.version="18.3.1-next-f1338f8080-20240426";function zp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zp)}catch(t){console.error(t)}}zp(),zf.exports=Qe;var zy=zf.exports,Dd=zy;Dl.createRoot=Dd.createRoot,Dl.hydrateRoot=Dd.hydrateRoot;function Uy({messages:t,currentUser:e,onlineUsers:n,typingUsers:r,onLogout:i,onClearChat:s,remainingTime:o,currentRoom:l}){const a=t||[],u=n||[],c=r||[],d=U.useRef(null);console.log("ChatWindow props:",{messagesCount:a.length,onlineUsersCount:u.length,typingUsersCount:c.length,currentRoom:l,currentUser:e}),U.useEffect(()=>{const m=setTimeout(f,100);return()=>clearTimeout(m)},[a,c]);const f=()=>{var m;(m=d.current)==null||m.scrollIntoView({behavior:"smooth",block:"nearest"})};return v.jsx("div",{className:"flex-1 bg-gray-50 p-4 overflow-y-auto",children:v.jsxs("div",{className:"max-w-4xl mx-auto h-full flex flex-col",children:[v.jsxs("div",{className:"bg-white rounded-xl p-4 mb-4 shadow-sm border border-gray-200",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",children:v.jsx("span",{className:"text-lg",children:""})}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-gray-800 font-semibold text-lg",children:"Chit Chat"}),v.jsxs("p",{className:"text-gray-600 text-sm",children:["Halo, ",v.jsx("span",{className:"font-medium text-blue-600",children:e||"User"}),"!  ",u.length," online",l&&v.jsxs(v.Fragment,{children:["  room: ",v.jsx("span",{className:"font-medium text-green-600",children:l.name})]})]})]})]}),v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx("button",{onClick:s,className:"flex items-center space-x-2 px-3 py-2 text-white rounded-lg transition-all duration-200 text-sm font-medium",title:`Hapus semua pesan di room ${l==null?void 0:l.name}`,children:v.jsx("span",{children:""})}),v.jsx("button",{onClick:i,className:"flex items-center space-x-2 px-3 py-2 text-white rounded-lg transition-all duration-200 text-sm font-medium",title:"Keluar dari chat",children:v.jsx("span",{children:""})})]})]}),c.length>0&&v.jsxs("div",{className:"mt-2 text-sm text-gray-500 italic",children:[c.join(", ")," ",(c.length===1,"sedang mengetik"),"..."]})]}),v.jsx("div",{className:"flex-1 bg-white rounded-xl p-4 md:p-6 shadow-sm border border-gray-200 overflow-hidden",children:a.length===0?v.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[v.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:v.jsx("span",{className:"text-3xl text-gray-400",children:""})}),v.jsx("p",{className:"text-gray-500 text-sm md:text-base max-w-md",children:l?`Mulai obrolan di room "${l.name}"`:"Kirim pesan pertama kamu.."})]}):v.jsxs("div",{className:"space-y-3 md:space-y-4 h-full overflow-y-auto pr-2",children:[a.map(m=>{var _,w,T,p,h;return v.jsx("div",{className:`flex ${m.sender===e?"justify-end":"justify-start"}`,children:m.type==="system"?v.jsx("div",{className:`text-center mx-auto px-4 py-2 rounded-full text-xs italic max-w-xs ${(_=m.text)!=null&&_.includes("dihapus")||(w=m.text)!=null&&w.includes("Sesi berakhir")?"bg-red-100 text-red-600 border border-red-200":(T=m.text)!=null&&T.includes("bergabung")||(p=m.text)!=null&&p.includes("meninggalkan")||(h=m.text)!=null&&h.includes("membuat room")?"bg-green-100 text-green-600 border border-green-200":"bg-gray-100 text-gray-500"}`,children:m.text||"System message"}):v.jsxs("div",{className:`max-w-[80%] md:max-w-md rounded-xl p-3 shadow-sm ${m.sender===e?"bg-blue-500 text-white rounded-br-none":"bg-gray-100 text-gray-700 rounded-bl-none"}`,children:[m.sender!==e&&v.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:m.sender||"Unknown User"}),v.jsx("div",{className:`text-sm md:text-base ${m.sender===e?"text-white":"text-gray-700"}`,children:m.text||"No message content"}),v.jsx("div",{className:`text-xs mt-1 ${m.sender===e?"text-blue-100":"text-gray-500"}`,children:m.timestamp?new Date(m.timestamp).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}):"Just now"})]})},m.id||Date.now()+Math.random())}),v.jsx("div",{ref:d})]})})]})})}function $y({onSend:t,onTypingStart:e,onTypingStop:n}){const[r,i]=U.useState(""),[s,o]=U.useState(!1),l=U.useRef(null),a=U.useRef(null),u=()=>{r.trim()!==""&&(t(r),i(""),d(),setTimeout(()=>{var _;(_=a.current)==null||_.focus()},100))},c=()=>{!s&&r.trim()&&(o(!0),e&&e()),l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{d()},3e3)},d=()=>{s&&(o(!1),n&&n()),l.current&&clearTimeout(l.current)},f=_=>{i(_.target.value),_.target.value.trim()?c():d()},m=_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),u())};return U.useEffect(()=>{var _;(_=a.current)==null||_.focus()},[]),v.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:v.jsx("div",{className:"max-w-4xl mx-auto",children:v.jsx("div",{className:"flex items-center space-x-3",children:v.jsx("div",{className:"flex-1",children:v.jsx("input",{ref:a,type:"text",placeholder:"Ketik pesan kamu...",value:r,onChange:f,onKeyDown:m,className:"w-full bg-gray-50 border border-gray-300 rounded-xl px-4 py-3 text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent text-base transition-all"})})})})})}function By({onSetup:t}){const[e,n]=U.useState(""),r=i=>{i.preventDefault(),e.trim()!==""&&t(e.trim())};return v.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4",children:[v.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 md:p-8 w-full max-w-md border border-gray-200",children:[v.jsx("div",{className:"text-center mb-6",children:v.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:["Chit ",v.jsx("span",{className:"text-2xl text-gray-600",children:""})," Chat"]})}),v.jsxs("form",{onSubmit:r,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("input",{id:"userName",type:"text",value:e,onChange:i=>n(i.target.value),placeholder:"Masukkan nama kamu...",autoComplete:"off",className:"w-full bg-gray-50 border border-gray-300 rounded-xl px-4 py-3 text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent text-base transition-all",autoFocus:!0,maxLength:10}),v.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-right",children:[e.length,"/10 karakter"]})]}),v.jsx("button",{type:"submit",disabled:e.trim()==="",className:"w-full bg-gray-400 text-white py-3 px-4 rounded-xl disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed transition-all duration-200 font-semibold text-base shadow-sm",children:"Mulai Chatting"})]})]}),v.jsx("footer",{className:"mt-8 text-center",children:v.jsxs("p",{className:"text-gray-500 text-sm",children:["made with ",v.jsx("span",{className:"text-red-500",children:""})]})})]})}function Wy({rooms:t,userName:e,onCreateRoom:n,onJoinRoom:r,showRoomSetup:i,onToggleSetup:s}){const[o,l]=U.useState(""),[a,u]=U.useState(""),[c,d]=U.useState(""),[f,m]=U.useState(""),_=T=>{T.preventDefault(),!(o.trim()===""||a==="")&&(n(o.trim(),a),l(""),u(""))},w=T=>{T.preventDefault(),!(c===""||f==="")&&(r(c,f),d(""),m(""))};return v.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4",children:[v.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 md:p-8 w-full max-w-md border border-gray-200",children:[v.jsx("div",{className:"text-center mb-6",children:v.jsxs("p",{className:"text-gray-600 mt-2",children:["Halo, ",v.jsx("span",{className:"font-semibold text-blue-600",children:e}),"!"]})}),i?v.jsxs("form",{onSubmit:_,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("input",{type:"text",value:o,onChange:T=>l(T.target.value),placeholder:"Nama room chat...",className:"w-full bg-gray-50 border border-gray-300 rounded-xl px-4 py-3 text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent text-base transition-all",autoFocus:!0,maxLength:10}),v.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-right",children:[o.length,"/10 karakter"]})]}),v.jsx("div",{children:v.jsx("input",{type:"password",value:a,onChange:T=>u(T.target.value),placeholder:"Password room...",className:"w-full bg-gray-50 border border-gray-300 rounded-xl px-4 py-3 text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent text-base transition-all"})}),v.jsx("button",{type:"submit",disabled:o.trim()===""||a==="",className:"w-full bg-gray-400 text-white py-3 px-4 rounded-xl disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed transition-all duration-200 font-semibold text-base shadow-sm hover:bg-gray-600",children:"Buat room"}),v.jsx("button",{type:"button",onClick:s,className:"w-full text-gray-600 py-2 px-4 rounded-xl transition-all duration-200 font-medium text-sm",children:" Kembali ke pilih room"})]}):v.jsxs("div",{className:"space-y-4",children:[t.length>0?v.jsxs(v.Fragment,{children:[v.jsxs("form",{onSubmit:w,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pilih room yang tersedia"}),v.jsxs("select",{value:c,onChange:T=>d(T.target.value),className:"w-full bg-gray-50 border border-gray-300 rounded-xl px-4 py-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent text-base transition-all",children:[v.jsx("option",{value:"",children:"Pilih room..."}),t.map(T=>v.jsxs("option",{value:T.id,children:[T.name," (oleh ",T.creator,")"]},T.id))]})]}),v.jsx("div",{children:v.jsx("input",{type:"password",value:f,onChange:T=>m(T.target.value),placeholder:"Masukkan password room...",className:"w-full bg-gray-50 border border-gray-300 rounded-xl px-4 py-3 text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent text-base transition-all"})}),v.jsx("button",{type:"submit",disabled:c===""||f==="",className:"w-full bg-gray-500 text-white py-3 px-4 rounded-xl disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed transition-all duration-200 font-semibold text-base shadow-sm hover:bg-gray-600",children:"Masuk room"})]}),v.jsx("div",{className:"text-center",children:v.jsx("span",{className:"text-gray-500 text-sm",children:"atau"})})]}):v.jsx("div",{className:"text-center py-4",children:v.jsx("p",{className:"text-gray-500",children:"Belum ada room yang tersedia nih, buat dulu ya"})}),v.jsx("button",{onClick:s,className:"w-full bg-gray-500 text-white py-3 px-4 rounded-xl transition-all duration-200 font-semibold text-base shadow-sm hover:bg-gray-800",children:"Buat room baru"})]})]}),v.jsx("footer",{className:"mt-8 text-center",children:v.jsxs("p",{className:"text-gray-500 text-sm",children:["made with ",v.jsx("span",{className:"text-red-500",children:""})]})})]})}var Od={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C=function(t,e){if(!t)throw Nr(e)},Nr=function(t){return new Error("Firebase Database ("+Up.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Hy=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Uu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,a=i+2<t.length,u=a?t[i+2]:0,c=s>>2,d=(s&3)<<4|l>>4;let f=(l&15)<<2|u>>6,m=u&63;a||(m=64,o||(f=64)),r.push(n[c],n[d],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($p(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Hy(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||u==null||d==null)throw new Vy;const f=s<<2|l>>4;if(r.push(f),u!==64){const m=l<<4&240|u>>2;if(r.push(m),d!==64){const _=u<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Vy extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Bp=function(t){const e=$p(t);return Uu.encodeByteArray(e,!0)},Js=function(t){return Bp(t).replace(/\./g,"")},xa=function(t){try{return Uu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(t){return Wp(void 0,t)}function Wp(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Gy(n)||(t[n]=Wp(t[n],e[n]));return t}function Gy(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy=()=>Ky().__FIREBASE_DEFAULTS__,qy=()=>{if(typeof process>"u"||typeof Od>"u")return;const t=Od.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Xy=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&xa(t[1]);return e&&JSON.parse(e)},Hp=()=>{try{return Yy()||qy()||Xy()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Jy=t=>{var e,n;return(n=(e=Hp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Zy=t=>{const e=Jy(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Vp=()=>{var t;return(t=Hp())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Js(JSON.stringify(n)),Js(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Qp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tv())}function nv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rv(){return Up.NODE_ADMIN===!0}function iv(){try{return typeof indexedDB=="object"}catch{return!1}}function sv(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="FirebaseError";class Bi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ov,Object.setPrototypeOf(this,Bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gp.prototype.create)}}class Gp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?lv(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Bi(i,l,r)}}function lv(t,e){return t.replace(av,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const av=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(t){return JSON.parse(t)}function _e(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Ni(xa(s[0])||""),n=Ni(xa(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},uv=function(t){const e=Kp(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},cv=function(t){const e=Kp(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function _r(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function ka(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zs(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Na(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Ad(s)&&Ad(o)){if(!Na(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ad(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],l=this.chain_[3],a=this.chain_[4],u,c;for(let d=0;d<80;d++){d<40?d<20?(u=l^s&(o^l),c=1518500249):(u=s^o^l,c=1859775393):d<60?(u=s&o|l&(s|o),c=2400959708):(u=s^o^l,c=3395469782);const f=(i<<5|i>>>27)+u+a+c+r[d]&4294967295;a=l,l=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function yr(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,C(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Ao=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(t){return t&&t._delegate?t._delegate:t}class Ti{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Et;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gv(e))try{this.getOrInitializeService({instanceIdentifier:hn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=hn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hn){return this.instances.has(e)}getOptions(e=hn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mv(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=hn){return this.component?this.component.multipleInstances?e:hn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mv(t){return t===hn?void 0:t}function gv(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(G||(G={}));const yv={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},vv=G.INFO,wv={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},Ev=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=wv[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yp{constructor(e){this.name=e,this._logLevel=vv,this._logHandler=Ev,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in G))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...e),this._logHandler(this,G.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...e),this._logHandler(this,G.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,G.INFO,...e),this._logHandler(this,G.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,G.WARN,...e),this._logHandler(this,G.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...e),this._logHandler(this,G.ERROR,...e)}}const Cv=(t,e)=>e.some(n=>t instanceof n);let Md,Ld;function Sv(){return Md||(Md=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xv(){return Ld||(Ld=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qp=new WeakMap,Ta=new WeakMap,Xp=new WeakMap,_l=new WeakMap,$u=new WeakMap;function kv(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(qt(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&qp.set(n,t)}).catch(()=>{}),$u.set(e,t),e}function Nv(t){if(Ta.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ta.set(t,e)}let Ia={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ta.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Xp.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Tv(t){Ia=t(Ia)}function Iv(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(yl(this),e,...n);return Xp.set(r,e.sort?e.sort():[e]),qt(r)}:xv().includes(t)?function(...e){return t.apply(yl(this),e),qt(qp.get(this))}:function(...e){return qt(t.apply(yl(this),e))}}function Rv(t){return typeof t=="function"?Iv(t):(t instanceof IDBTransaction&&Nv(t),Cv(t,Sv())?new Proxy(t,Ia):t)}function qt(t){if(t instanceof IDBRequest)return kv(t);if(_l.has(t))return _l.get(t);const e=Rv(t);return e!==t&&(_l.set(t,e),$u.set(e,t)),e}const yl=t=>$u.get(t);function Pv(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=qt(o);return r&&o.addEventListener("upgradeneeded",a=>{r(qt(o.result),a.oldVersion,a.newVersion,qt(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Dv=["get","getKey","getAll","getAllKeys","count"],Ov=["put","add","delete","clear"],vl=new Map;function Fd(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vl.get(e))return vl.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Ov.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Dv.includes(n)))return;const s=async function(o,...l){const a=this.transaction(o,i?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&a.done]))[0]};return vl.set(e,s),s}Tv(t=>({...t,get:(e,n,r)=>Fd(e,n)||t.get(e,n,r),has:(e,n)=>!!Fd(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Mv(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Mv(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ra="@firebase/app",bd="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt=new Yp("@firebase/app"),Lv="@firebase/app-compat",Fv="@firebase/analytics-compat",bv="@firebase/analytics",jv="@firebase/app-check-compat",zv="@firebase/app-check",Uv="@firebase/auth",$v="@firebase/auth-compat",Bv="@firebase/database",Wv="@firebase/data-connect",Hv="@firebase/database-compat",Vv="@firebase/functions",Qv="@firebase/functions-compat",Gv="@firebase/installations",Kv="@firebase/installations-compat",Yv="@firebase/messaging",qv="@firebase/messaging-compat",Xv="@firebase/performance",Jv="@firebase/performance-compat",Zv="@firebase/remote-config",e0="@firebase/remote-config-compat",t0="@firebase/storage",n0="@firebase/storage-compat",r0="@firebase/firestore",i0="@firebase/vertexai-preview",s0="@firebase/firestore-compat",o0="firebase",l0="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa="[DEFAULT]",a0={[Ra]:"fire-core",[Lv]:"fire-core-compat",[bv]:"fire-analytics",[Fv]:"fire-analytics-compat",[zv]:"fire-app-check",[jv]:"fire-app-check-compat",[Uv]:"fire-auth",[$v]:"fire-auth-compat",[Bv]:"fire-rtdb",[Wv]:"fire-data-connect",[Hv]:"fire-rtdb-compat",[Vv]:"fire-fn",[Qv]:"fire-fn-compat",[Gv]:"fire-iid",[Kv]:"fire-iid-compat",[Yv]:"fire-fcm",[qv]:"fire-fcm-compat",[Xv]:"fire-perf",[Jv]:"fire-perf-compat",[Zv]:"fire-rc",[e0]:"fire-rc-compat",[t0]:"fire-gcs",[n0]:"fire-gcs-compat",[r0]:"fire-fst",[s0]:"fire-fst-compat",[i0]:"fire-vertex","fire-js":"fire-js",[o0]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=new Map,u0=new Map,Da=new Map;function jd(t,e){try{t.container.addComponent(e)}catch(n){Dt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function to(t){const e=t.name;if(Da.has(e))return Dt.debug(`There were multiple attempts to register component ${e}.`),!1;Da.set(e,t);for(const n of eo.values())jd(n,t);for(const n of u0.values())jd(n,t);return!0}function c0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xt=new Gp("app","Firebase",d0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ti("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xt.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0=l0;function Jp(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Pa,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Xt.create("bad-app-name",{appName:String(i)});if(n||(n=Vp()),!n)throw Xt.create("no-options");const s=eo.get(i);if(s){if(Na(n,s.options)&&Na(r,s.config))return s;throw Xt.create("duplicate-app",{appName:i})}const o=new _v(i);for(const a of Da.values())o.addComponent(a);const l=new f0(n,r,o);return eo.set(i,l),l}function p0(t=Pa){const e=eo.get(t);if(!e&&t===Pa&&Vp())return Jp();if(!e)throw Xt.create("no-app",{appName:t});return e}function or(t,e,n){var r;let i=(r=a0[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dt.warn(l.join(" "));return}to(new Ti(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="firebase-heartbeat-database",g0=1,Ii="firebase-heartbeat-store";let wl=null;function Zp(){return wl||(wl=Pv(m0,g0,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ii)}catch(n){console.warn(n)}}}}).catch(t=>{throw Xt.create("idb-open",{originalErrorMessage:t.message})})),wl}async function _0(t){try{const n=(await Zp()).transaction(Ii),r=await n.objectStore(Ii).get(em(t));return await n.done,r}catch(e){if(e instanceof Bi)Dt.warn(e.message);else{const n=Xt.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dt.warn(n.message)}}}async function zd(t,e){try{const r=(await Zp()).transaction(Ii,"readwrite");await r.objectStore(Ii).put(e,em(t)),await r.done}catch(n){if(n instanceof Bi)Dt.warn(n.message);else{const r=Xt.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Dt.warn(r.message)}}}function em(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0=1024,v0=30*24*60*60*1e3;class w0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new C0(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ud();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=v0}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Dt.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ud(),{heartbeatsToSend:r,unsentEntries:i}=E0(this._heartbeatsCache.heartbeats),s=Js(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Dt.warn(n),""}}}function Ud(){return new Date().toISOString().substring(0,10)}function E0(t,e=y0){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),$d(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),$d(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class C0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iv()?sv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _0(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return zd(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return zd(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function $d(t){return Js(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(t){to(new Ti("platform-logger",e=>new Av(e),"PRIVATE")),to(new Ti("heartbeat",e=>new w0(e),"PRIVATE")),or(Ra,bd,t),or(Ra,bd,"esm2017"),or("fire-js","")}S0("");var x0="firebase",k0="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */or(x0,k0,"app");var Bd={};const Wd="@firebase/database",Hd="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tm="";function N0(t){tm=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),_e(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ni(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return _t(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new T0(e)}}catch{}return new I0},yn=nm("localStorage"),R0=nm("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr=new Yp("@firebase/database"),P0=function(){let t=1;return function(){return t++}}(),rm=function(t){const e=hv(t),n=new fv;n.update(e);const r=n.digest();return Uu.encodeByteArray(r)},Wi=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Wi.apply(null,r):typeof r=="object"?e+=_e(r):e+=r,e+=" "}return e};let ii=null,Vd=!0;const D0=function(t,e){C(!0,"Can't turn on custom loggers persistently."),lr.logLevel=G.VERBOSE,ii=lr.log.bind(lr)},we=function(...t){if(Vd===!0&&(Vd=!1,ii===null&&R0.get("logging_enabled")===!0&&D0()),ii){const e=Wi.apply(null,t);ii(e)}},Hi=function(t){return function(...e){we(t,...e)}},Oa=function(...t){const e="FIREBASE INTERNAL ERROR: "+Wi(...t);lr.error(e)},Ot=function(...t){const e=`FIREBASE FATAL ERROR: ${Wi(...t)}`;throw lr.error(e),new Error(e)},ze=function(...t){const e="FIREBASE WARNING: "+Wi(...t);lr.warn(e)},O0=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ze("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Mo=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},A0=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},vr="[MIN_NAME]",In="[MAX_NAME]",Ln=function(t,e){if(t===e)return 0;if(t===vr||e===In)return-1;if(e===vr||t===In)return 1;{const n=Qd(t),r=Qd(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},M0=function(t,e){return t===e?0:t<e?-1:1},Ur=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+_e(e))},Bu=function(t){if(typeof t!="object"||t===null)return _e(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=_e(e[r]),n+=":",n+=Bu(t[e[r]]);return n+="}",n},im=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Te(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const sm=function(t){C(!Mo(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,l,a;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(a=n;a;a-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(a=e;a;a-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const c=u.join("");let d="";for(a=0;a<64;a+=8){let f=parseInt(c.substr(a,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},L0=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},F0=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function b0(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const j0=new RegExp("^-?(0*)\\d{1,10}$"),z0=-2147483648,U0=2147483647,Qd=function(t){if(j0.test(t)){const e=Number(t);if(e>=z0&&e<=U0)return e}return null},Tr=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw ze("Exception was thrown by user callback.",n),e},Math.floor(0))}},$0=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},si=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ze(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(we("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ze(e)}}class Ts{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ts.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu="5",om="v",lm="s",am="r",um="f",cm=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,dm="ls",fm="p",Aa="ac",hm="websocket",pm="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n,r,i,s=!1,o="",l=!1,a=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=yn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&yn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function H0(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function gm(t,e,n){C(typeof e=="string","typeof type must == string"),C(typeof n=="object","typeof params must == object");let r;if(e===hm)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===pm)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);H0(t)&&(n.ns=t.namespace);const i=[];return Te(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(){this.counters_={}}incrementCounter(e,n=1){_t(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Qy(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El={},Cl={};function Hu(t){const e=t.toString();return El[e]||(El[e]=new V0),El[e]}function Q0(t,e){const n=t.toString();return Cl[n]||(Cl[n]=e()),Cl[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Tr(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="start",K0="close",Y0="pLPCommand",q0="pRTLPCB",_m="id",ym="pw",vm="ser",X0="cb",J0="seg",Z0="ts",ew="d",tw="dframe",wm=1870,Em=30,nw=wm-Em,rw=25e3,iw=3e4;class Zn{constructor(e,n,r,i,s,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Hi(e),this.stats_=Hu(n),this.urlFn=a=>(this.appCheckToken&&(a[Aa]=this.appCheckToken),gm(n,pm,a))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new G0(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(iw)),A0(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Vu((...s)=>{const[o,l,a,u,c]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Gd)this.id=l,this.password=a;else if(o===K0)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[Gd]="t",r[vm]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[X0]=this.scriptTagHolder.uniqueCallbackIdentifier),r[om]=Wu,this.transportSessionId&&(r[lm]=this.transportSessionId),this.lastSessionId&&(r[dm]=this.lastSessionId),this.applicationId&&(r[fm]=this.applicationId),this.appCheckToken&&(r[Aa]=this.appCheckToken),typeof location<"u"&&location.hostname&&cm.test(location.hostname)&&(r[am]=um);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Zn.forceAllow_=!0}static forceDisallow(){Zn.forceDisallow_=!0}static isAvailable(){return Zn.forceAllow_?!0:!Zn.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!L0()&&!F0()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=_e(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Bp(n),i=im(r,nw);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[tw]="t",r[_m]=e,r[ym]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=_e(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Vu{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=P0(),window[Y0+this.uniqueCallbackIdentifier]=e,window[q0+this.uniqueCallbackIdentifier]=n,this.myIFrame=Vu.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){we("frame writing exception"),l.stack&&we(l.stack),we(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||we("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[_m]=this.myID,e[ym]=this.myPW,e[vm]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Em+r.length<=wm;){const o=this.pendingSegs.shift();r=r+"&"+J0+i+"="+o.seg+"&"+Z0+i+"="+o.ts+"&"+ew+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(rw)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{we("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw=16384,ow=45e3;let no=null;typeof MozWebSocket<"u"?no=MozWebSocket:typeof WebSocket<"u"&&(no=WebSocket);class ot{constructor(e,n,r,i,s,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Hi(this.connId),this.stats_=Hu(n),this.connURL=ot.connectionURL_(n,o,l,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[om]=Wu,typeof location<"u"&&location.hostname&&cm.test(location.hostname)&&(o[am]=um),n&&(o[lm]=n),r&&(o[dm]=r),i&&(o[Aa]=i),s&&(o[fm]=s),gm(e,hm,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,yn.set("previous_websocket_failure",!0);try{let r;rv(),this.mySock=new no(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){ot.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&no!==null&&!ot.forceDisallow_}static previouslyFailed(){return yn.isInMemoryStorage||yn.get("previous_websocket_failure")===!0}markConnectionHealthy(){yn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Ni(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(C(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=_e(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=im(n,sw);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(ow))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ot.responsesRequiredToBeHealthy=2;ot.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Zn,ot]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=ot&&ot.isAvailable();let r=n&&!ot.previouslyFailed();if(e.webSocketOnly&&(n||ze("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ot];else{const i=this.transports_=[];for(const s of Ri.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Ri.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ri.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=6e4,aw=5e3,uw=10*1024,cw=100*1024,Sl="t",Kd="d",dw="s",Yd="r",fw="e",qd="o",Xd="a",Jd="n",Zd="p",hw="h";class pw{constructor(e,n,r,i,s,o,l,a,u,c){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Hi("c:"+this.id+":"),this.transportManager_=new Ri(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=si(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>cw?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>uw?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Sl in e){const n=e[Sl];n===Xd?this.upgradeIfSecondaryHealthy_():n===Yd?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===qd&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ur("t",e),r=Ur("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Zd,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Xd,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Jd,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ur("t",e),r=Ur("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ur(Sl,e);if(Kd in e){const r=e[Kd];if(n===hw){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Jd){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===dw?this.onConnectionShutdown_(r):n===Yd?this.onReset_(r):n===fw?Oa("Server Error: "+r):n===qd?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Oa("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Wu!==r&&ze("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),si(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(lw))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):si(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(aw))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Zd,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(yn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e){this.allowedEvents_=e,this.listeners_={},C(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){C(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends Sm{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Qp()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ro}getInitialEvent(e){return C(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef=32,tf=768;class H{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function B(){return new H("")}function L(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function tn(t){return t.pieces_.length-t.pieceNum_}function V(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new H(t.pieces_,e)}function Qu(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function mw(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Pi(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function xm(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new H(e,0)}function ue(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof H)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new H(n,0)}function F(t){return t.pieceNum_>=t.pieces_.length}function Me(t,e){const n=L(t),r=L(e);if(n===null)return e;if(n===r)return Me(V(t),V(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function gw(t,e){const n=Pi(t,0),r=Pi(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=Ln(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function Gu(t,e){if(tn(t)!==tn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Xe(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(tn(t)>tn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class _w{constructor(e,n){this.errorPrefix_=n,this.parts_=Pi(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ao(this.parts_[r]);km(this)}}function yw(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ao(e),km(t)}function vw(t){const e=t.parts_.pop();t.byteLength_-=Ao(e),t.parts_.length>0&&(t.byteLength_-=1)}function km(t){if(t.byteLength_>tf)throw new Error(t.errorPrefix_+"has a key path longer than "+tf+" bytes ("+t.byteLength_+").");if(t.parts_.length>ef)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ef+") or object contains a cycle "+pn(t))}function pn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku extends Sm{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Ku}getInitialEvent(e){return C(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=1e3,ww=60*5*1e3,nf=30*1e3,Ew=1.3,Cw=3e4,Sw="server_kill",rf=3;class Nt extends Cm{constructor(e,n,r,i,s,o,l,a){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=Nt.nextPersistentConnectionId_++,this.log_=Hi("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=$r,this.maxReconnectDelay_=ww,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ku.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&ro.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(_e(s)),C(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Et,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),C(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),C(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,l=>{const a=l.d,u=l.s;Nt.warnOnListenWarnings_(a,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,a))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&_t(e,"w")){const r=_r(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();ze(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||cv(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=nf)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=uv(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),C(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+_e(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Oa("Unrecognized action received from server: "+_e(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){C(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=$r,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=$r,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Cw&&(this.reconnectDelay_=$r),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Ew)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Nt.nextConnectionId_++,s=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,r())},u=function(d){C(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(d)};this.realtime_={close:a,sendRequest:u};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);o?we("getToken() completed but was canceled"):(we("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,l=new pw(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,m=>{ze(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(Sw)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&ze(d),a())}}}interrupt(e){we("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){we("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ka(this.interruptReasons_)&&(this.reconnectDelay_=$r,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Bu(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new H(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){we("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=rf&&(this.reconnectDelay_=nf,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){we("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=rf&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+tm.replace(/\./g,"-")]=1,Qp()?e["framework.cordova"]=1:nv()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ro.getInstance().currentlyOnline();return ka(this.interruptReasons_)&&e}}Nt.nextPersistentConnectionId_=0;Nt.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new b(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new b(vr,e),i=new b(vr,n);return this.compare(r,i)!==0}minPost(){return b.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hs;class Nm extends Lo{static get __EMPTY_NODE(){return hs}static set __EMPTY_NODE(e){hs=e}compare(e,n){return Ln(e.name,n.name)}isDefinedOn(e){throw Nr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return b.MIN}maxPost(){return new b(In,hs)}makePost(e,n){return C(typeof e=="string","KeyIndex indexValue must always be a string."),new b(e,hs)}toString(){return".key"}}const ar=new Nm;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ge{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ge.RED,this.left=i??Le.EMPTY_NODE,this.right=s??Le.EMPTY_NODE}copy(e,n,r,i,s){return new ge(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Le.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Le.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ge.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ge.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ge.RED=!0;ge.BLACK=!1;class xw{copy(e,n,r,i,s){return this}insert(e,n,r){return new ge(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Le{constructor(e,n=Le.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Le(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ge.BLACK,null,null))}remove(e){return new Le(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ge.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ps(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ps(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ps(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ps(this.root_,null,this.comparator_,!0,e)}}Le.EMPTY_NODE=new xw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(t,e){return Ln(t.name,e.name)}function Yu(t,e){return Ln(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ma;function Nw(t){Ma=t}const Tm=function(t){return typeof t=="number"?"number:"+sm(t):"string:"+t},Im=function(t){if(t.isLeafNode()){const e=t.val();C(typeof e=="string"||typeof e=="number"||typeof e=="object"&&_t(e,".sv"),"Priority must be a string or number.")}else C(t===Ma||t.isEmpty(),"priority of unexpected type.");C(t===Ma||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sf;class pe{constructor(e,n=pe.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,C(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Im(this.priorityNode_)}static set __childrenNodeConstructor(e){sf=e}static get __childrenNodeConstructor(){return sf}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new pe(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:pe.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return F(e)?this:L(e)===".priority"?this.priorityNode_:pe.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:pe.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=L(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(C(r!==".priority"||tn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,pe.__childrenNodeConstructor.EMPTY_NODE.updateChild(V(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Tm(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=sm(this.value_):e+=this.value_,this.lazyHash_=rm(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===pe.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof pe.__childrenNodeConstructor?-1:(C(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=pe.VALUE_TYPE_ORDER.indexOf(n),s=pe.VALUE_TYPE_ORDER.indexOf(r);return C(i>=0,"Unknown leaf type: "+n),C(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}pe.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rm,Pm;function Tw(t){Rm=t}function Iw(t){Pm=t}class Rw extends Lo{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Ln(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return b.MIN}maxPost(){return new b(In,new pe("[PRIORITY-POST]",Pm))}makePost(e,n){const r=Rm(e);return new b(n,new pe("[PRIORITY-POST]",r))}toString(){return".priority"}}const ie=new Rw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw=Math.log(2);class Dw{constructor(e){const n=s=>parseInt(Math.log(s)/Pw,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const io=function(t,e,n,r){t.sort(e);const i=function(a,u){const c=u-a;let d,f;if(c===0)return null;if(c===1)return d=t[a],f=n?n(d):d,new ge(f,d.node,ge.BLACK,null,null);{const m=parseInt(c/2,10)+a,_=i(a,m),w=i(m+1,u);return d=t[m],f=n?n(d):d,new ge(f,d.node,ge.BLACK,_,w)}},s=function(a){let u=null,c=null,d=t.length;const f=function(_,w){const T=d-_,p=d;d-=_;const h=i(T+1,p),g=t[T],y=n?n(g):g;m(new ge(y,g.node,w,null,h))},m=function(_){u?(u.left=_,u=_):(c=_,u=_)};for(let _=0;_<a.count;++_){const w=a.nextBitIsOne(),T=Math.pow(2,a.count-(_+1));w?f(T,ge.BLACK):(f(T,ge.BLACK),f(T,ge.RED))}return c},o=new Dw(t.length),l=s(o);return new Le(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xl;const zn={};class xt{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return C(zn&&ie,"ChildrenNode.ts has not been loaded"),xl=xl||new xt({".priority":zn},{".priority":ie}),xl}get(e){const n=_r(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Le?n:null}hasIndex(e){return _t(this.indexSet_,e.toString())}addIndex(e,n){C(e!==ar,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(b.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let l;i?l=io(r,e.getCompare()):l=zn;const a=e.toString(),u=Object.assign({},this.indexSet_);u[a]=e;const c=Object.assign({},this.indexes_);return c[a]=l,new xt(c,u)}addToIndexes(e,n){const r=Zs(this.indexes_,(i,s)=>{const o=_r(this.indexSet_,s);if(C(o,"Missing index implementation for "+s),i===zn)if(o.isDefinedOn(e.node)){const l=[],a=n.getIterator(b.Wrap);let u=a.getNext();for(;u;)u.name!==e.name&&l.push(u),u=a.getNext();return l.push(e),io(l,o.getCompare())}else return zn;else{const l=n.get(e.name);let a=i;return l&&(a=a.remove(new b(e.name,l))),a.insert(e,e.node)}});return new xt(r,this.indexSet_)}removeFromIndexes(e,n){const r=Zs(this.indexes_,i=>{if(i===zn)return i;{const s=n.get(e.name);return s?i.remove(new b(e.name,s)):i}});return new xt(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Br;class D{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Im(this.priorityNode_),this.children_.isEmpty()&&C(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Br||(Br=new D(new Le(Yu),null,xt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Br}updatePriority(e){return this.children_.isEmpty()?this:new D(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Br:n}}getChild(e){const n=L(e);return n===null?this:this.getImmediateChild(n).getChild(V(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(C(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new b(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Br:this.priorityNode_;return new D(i,o,s)}}updateChild(e,n){const r=L(e);if(r===null)return n;{C(L(e)!==".priority"||tn(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(V(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(ie,(o,l)=>{n[o]=l.val(e),r++,s&&D.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Tm(this.getPriority().val())+":"),this.forEachChild(ie,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":rm(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new b(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new b(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new b(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,b.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,b.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Vi?-1:0}withIndex(e){if(e===ar||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new D(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ar||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(ie),i=n.getIterator(ie);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===ar?null:this.indexMap_.get(e.toString())}}D.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Ow extends D{constructor(){super(new Le(Yu),D.EMPTY_NODE,xt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return D.EMPTY_NODE}isEmpty(){return!1}}const Vi=new Ow;Object.defineProperties(b,{MIN:{value:new b(vr,D.EMPTY_NODE)},MAX:{value:new b(In,Vi)}});Nm.__EMPTY_NODE=D.EMPTY_NODE;pe.__childrenNodeConstructor=D;Nw(Vi);Iw(Vi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=!0;function ce(t,e=null){if(t===null)return D.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),C(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new pe(n,ce(e))}if(!(t instanceof Array)&&Aw){const n=[];let r=!1;if(Te(t,(o,l)=>{if(o.substring(0,1)!=="."){const a=ce(l);a.isEmpty()||(r=r||!a.getPriority().isEmpty(),n.push(new b(o,a)))}}),n.length===0)return D.EMPTY_NODE;const s=io(n,kw,o=>o.name,Yu);if(r){const o=io(n,ie.getCompare());return new D(s,ce(e),new xt({".priority":o},{".priority":ie}))}else return new D(s,ce(e),xt.Default)}else{let n=D.EMPTY_NODE;return Te(t,(r,i)=>{if(_t(t,r)&&r.substring(0,1)!=="."){const s=ce(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(ce(e))}}Tw(ce);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw extends Lo{constructor(e){super(),this.indexPath_=e,C(!F(e)&&L(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Ln(e.name,n.name):s}makePost(e,n){const r=ce(e),i=D.EMPTY_NODE.updateChild(this.indexPath_,r);return new b(n,i)}maxPost(){const e=D.EMPTY_NODE.updateChild(this.indexPath_,Vi);return new b(In,e)}toString(){return Pi(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw extends Lo{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Ln(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return b.MIN}maxPost(){return b.MAX}makePost(e,n){const r=ce(e);return new b(n,r)}toString(){return".value"}}const Fw=new Lw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(t){return{type:"value",snapshotNode:t}}function wr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Di(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Oi(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function bw(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){C(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Di(n,l)):C(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(wr(n,r)):o.trackChildChange(Oi(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ie,(i,s)=>{n.hasChild(i)||r.trackChildChange(Di(i,s))}),n.isLeafNode()||n.forEachChild(ie,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Oi(i,s,o))}else r.trackChildChange(wr(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?D.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this.indexedFilter_=new qu(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ai.getStartPost_(e),this.endPost_=Ai.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new b(n,r))||(r=D.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=D.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(D.EMPTY_NODE);const s=this;return n.forEachChild(ie,(o,l)=>{s.matches(new b(o,l))||(i=i.updateImmediateChild(o,D.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Ai(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new b(n,r))||(r=D.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=D.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=D.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))i=i.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(D.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const l=s.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:i=i.updateImmediateChild(l.name,D.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(f,m)=>d(m,f)}else o=this.index_.getCompare();const l=e;C(l.numChildren()===this.limit_,"");const a=new b(n,r),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(l.hasChild(n)){const d=l.getImmediateChild(n);let f=i.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===n||l.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);const m=f==null?1:o(f,a);if(c&&!r.isEmpty()&&m>=0)return s!=null&&s.trackChildChange(Oi(n,r,d)),l.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Di(n,d));const w=l.updateImmediateChild(n,D.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s!=null&&s.trackChildChange(wr(f.name,f.node)),w.updateImmediateChild(f.name,f.node)):w}}else return r.isEmpty()?e:c&&o(u,a)>=0?(s!=null&&(s.trackChildChange(Di(u.name,u.node)),s.trackChildChange(wr(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(u.name,D.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ie}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return C(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return C(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vr}hasEnd(){return this.endSet_}getIndexEndValue(){return C(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return C(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:In}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return C(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ie}copy(){const e=new Xu;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function zw(t){return t.loadsAllData()?new qu(t.getIndex()):t.hasLimit()?new jw(t):new Ai(t)}function of(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ie?n="$priority":t.index_===Fw?n="$value":t.index_===ar?n="$key":(C(t.index_ instanceof Mw,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=_e(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=_e(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+_e(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=_e(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+_e(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function lf(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ie&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends Cm{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Hi("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(C(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=so.getListenId_(e,r),l={};this.listens_[o]=l;const a=of(e._queryParams);this.restRequest_(s+".json",a,(u,c)=>{let d=c;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,r),_r(this.listens_,o)===l){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",i(f,null)}})}unlisten(e,n){const r=so.getListenId_(e,n);delete this.listens_[r]}get(e){const n=of(e._queryParams),r=e._path.toString(),i=new Et;return this.restRequest_(r+".json",n,(s,o)=>{let l=o;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+dv(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=Ni(l.responseText)}catch{ze("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,a)}else l.status!==401&&l.status!==404&&ze("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(){this.rootNode_=D.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(){return{value:null,children:new Map}}function Ir(t,e,n){if(F(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=L(e);t.children.has(r)||t.children.set(r,oo());const i=t.children.get(r);e=V(e),Ir(i,e,n)}}function La(t,e){if(F(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(ie,(r,i)=>{Ir(t,new H(r),i)}),La(t,e)}}else if(t.children.size>0){const n=L(e);return e=V(e),t.children.has(n)&&La(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function Fa(t,e,n){t.value!==null?n(e,t.value):$w(t,(r,i)=>{const s=new H(e.toString()+"/"+r);Fa(i,s,n)})}function $w(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Te(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af=10*1e3,Ww=30*1e3,Hw=5*60*1e3;class Vw{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Bw(e);const r=af+(Ww-af)*Math.random();si(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Te(e,(i,s)=>{s>0&&_t(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),si(this.reportStats_.bind(this),Math.floor(Math.random()*2*Hw))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(lt||(lt={}));function Om(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ju(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Zu(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=lt.ACK_USER_WRITE,this.source=Om()}operationForChild(e){if(F(this.path)){if(this.affectedTree.value!=null)return C(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new H(e));return new lo(B(),n,this.revert)}}else return C(L(this.path)===e,"operationForChild called for unrelated child."),new lo(V(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,n){this.source=e,this.path=n,this.type=lt.LISTEN_COMPLETE}operationForChild(e){return F(this.path)?new Mi(this.source,B()):new Mi(this.source,V(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=lt.OVERWRITE}operationForChild(e){return F(this.path)?new Rn(this.source,B(),this.snap.getImmediateChild(e)):new Rn(this.source,V(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=lt.MERGE}operationForChild(e){if(F(this.path)){const n=this.children.subtree(new H(e));return n.isEmpty()?null:n.value?new Rn(this.source,B(),n.value):new Li(this.source,B(),n)}else return C(L(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Li(this.source,V(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(F(e))return this.isFullyInitialized()&&!this.filtered_;const n=L(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Gw(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(bw(o.childName,o.snapshotNode))}),Wr(t,i,"child_removed",e,r,n),Wr(t,i,"child_added",e,r,n),Wr(t,i,"child_moved",s,r,n),Wr(t,i,"child_changed",e,r,n),Wr(t,i,"value",e,r,n),i}function Wr(t,e,n,r,i,s){const o=r.filter(l=>l.type===n);o.sort((l,a)=>Yw(t,l,a)),o.forEach(l=>{const a=Kw(t,l,s);i.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(a,t.query_))})})}function Kw(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Yw(t,e,n){if(e.childName==null||n.childName==null)throw Nr("Should only compare child_ events.");const r=new b(e.childName,e.snapshotNode),i=new b(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(t,e){return{eventCache:t,serverCache:e}}function oi(t,e,n,r){return Fo(new Pn(e,n,r),t.serverCache)}function Am(t,e,n,r){return Fo(t.eventCache,new Pn(e,n,r))}function ba(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Dn(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kl;const qw=()=>(kl||(kl=new Le(M0)),kl);class q{constructor(e,n=qw()){this.value=e,this.children=n}static fromObject(e){let n=new q(null);return Te(e,(r,i)=>{n=n.set(new H(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:B(),value:this.value};if(F(e))return null;{const r=L(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(V(e),n);return s!=null?{path:ue(new H(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(F(e))return this;{const n=L(e),r=this.children.get(n);return r!==null?r.subtree(V(e)):new q(null)}}set(e,n){if(F(e))return new q(n,this.children);{const r=L(e),s=(this.children.get(r)||new q(null)).set(V(e),n),o=this.children.insert(r,s);return new q(this.value,o)}}remove(e){if(F(e))return this.children.isEmpty()?new q(null):new q(null,this.children);{const n=L(e),r=this.children.get(n);if(r){const i=r.remove(V(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new q(null):new q(this.value,s)}else return this}}get(e){if(F(e))return this.value;{const n=L(e),r=this.children.get(n);return r?r.get(V(e)):null}}setTree(e,n){if(F(e))return n;{const r=L(e),s=(this.children.get(r)||new q(null)).setTree(V(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new q(this.value,o)}}fold(e){return this.fold_(B(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ue(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,B(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(F(e))return null;{const s=L(e),o=this.children.get(s);return o?o.findOnPath_(V(e),ue(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,B(),n)}foreachOnPath_(e,n,r){if(F(e))return this;{this.value&&r(n,this.value);const i=L(e),s=this.children.get(i);return s?s.foreachOnPath_(V(e),ue(n,i),r):new q(null)}}foreach(e){this.foreach_(B(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ue(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.writeTree_=e}static empty(){return new ct(new q(null))}}function li(t,e,n){if(F(e))return new ct(new q(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Me(i,e);return s=s.updateChild(o,n),new ct(t.writeTree_.set(i,s))}else{const i=new q(n),s=t.writeTree_.setTree(e,i);return new ct(s)}}}function uf(t,e,n){let r=t;return Te(n,(i,s)=>{r=li(r,ue(e,i),s)}),r}function cf(t,e){if(F(e))return ct.empty();{const n=t.writeTree_.setTree(e,new q(null));return new ct(n)}}function ja(t,e){return Fn(t,e)!=null}function Fn(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Me(n.path,e)):null}function df(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ie,(r,i)=>{e.push(new b(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new b(r,i.value))}),e}function Jt(t,e){if(F(e))return t;{const n=Fn(t,e);return n!=null?new ct(new q(n)):new ct(t.writeTree_.subtree(e))}}function za(t){return t.writeTree_.isEmpty()}function Er(t,e){return Mm(B(),t.writeTree_,e)}function Mm(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(C(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=Mm(ue(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ue(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(t,e){return jm(e,t)}function Xw(t,e,n,r,i){C(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=li(t.visibleWrites,e,n)),t.lastWriteId=r}function Jw(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Zw(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);C(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&eE(l,r.path)?i=!1:Xe(r.path,l.path)&&(s=!0)),o--}if(i){if(s)return tE(t),!0;if(r.snap)t.visibleWrites=cf(t.visibleWrites,r.path);else{const l=r.children;Te(l,a=>{t.visibleWrites=cf(t.visibleWrites,ue(r.path,a))})}return!0}else return!1}function eE(t,e){if(t.snap)return Xe(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Xe(ue(t.path,n),e))return!0;return!1}function tE(t){t.visibleWrites=Lm(t.allWrites,nE,B()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function nE(t){return t.visible}function Lm(t,e,n){let r=ct.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let l;if(s.snap)Xe(n,o)?(l=Me(n,o),r=li(r,l,s.snap)):Xe(o,n)&&(l=Me(o,n),r=li(r,B(),s.snap.getChild(l)));else if(s.children){if(Xe(n,o))l=Me(n,o),r=uf(r,l,s.children);else if(Xe(o,n))if(l=Me(o,n),F(l))r=uf(r,B(),s.children);else{const a=_r(s.children,L(l));if(a){const u=a.getChild(V(l));r=li(r,B(),u)}}}else throw Nr("WriteRecord should have .snap or .children")}}return r}function Fm(t,e,n,r,i){if(!r&&!i){const s=Fn(t.visibleWrites,e);if(s!=null)return s;{const o=Jt(t.visibleWrites,e);if(za(o))return n;if(n==null&&!ja(o,B()))return null;{const l=n||D.EMPTY_NODE;return Er(o,l)}}}else{const s=Jt(t.visibleWrites,e);if(!i&&za(s))return n;if(!i&&n==null&&!ja(s,B()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Xe(u.path,e)||Xe(e,u.path))},l=Lm(t.allWrites,o,e),a=n||D.EMPTY_NODE;return Er(l,a)}}}function rE(t,e,n){let r=D.EMPTY_NODE;const i=Fn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ie,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Jt(t.visibleWrites,e);return n.forEachChild(ie,(o,l)=>{const a=Er(Jt(s,new H(o)),l);r=r.updateImmediateChild(o,a)}),df(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Jt(t.visibleWrites,e);return df(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function iE(t,e,n,r,i){C(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=ue(e,n);if(ja(t.visibleWrites,s))return null;{const o=Jt(t.visibleWrites,s);return za(o)?i.getChild(n):Er(o,i.getChild(n))}}function sE(t,e,n,r){const i=ue(e,n),s=Fn(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Jt(t.visibleWrites,i);return Er(o,r.getNode().getImmediateChild(n))}else return null}function oE(t,e){return Fn(t.visibleWrites,e)}function lE(t,e,n,r,i,s,o){let l;const a=Jt(t.visibleWrites,e),u=Fn(a,B());if(u!=null)l=u;else if(n!=null)l=Er(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const c=[],d=o.getCompare(),f=s?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let m=f.getNext();for(;m&&c.length<i;)d(m,r)!==0&&c.push(m),m=f.getNext();return c}else return[]}function aE(){return{visibleWrites:ct.empty(),allWrites:[],lastWriteId:-1}}function ao(t,e,n,r){return Fm(t.writeTree,t.treePath,e,n,r)}function tc(t,e){return rE(t.writeTree,t.treePath,e)}function ff(t,e,n,r){return iE(t.writeTree,t.treePath,e,n,r)}function uo(t,e){return oE(t.writeTree,ue(t.treePath,e))}function uE(t,e,n,r,i,s){return lE(t.writeTree,t.treePath,e,n,r,i,s)}function nc(t,e,n){return sE(t.writeTree,t.treePath,e,n)}function bm(t,e){return jm(ue(t.treePath,e),t.writeTree)}function jm(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;C(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),C(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Oi(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Di(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,wr(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Oi(r,e.snapshotNode,i.oldSnap));else throw Nr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const zm=new dE;class rc{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Pn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return nc(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Dn(this.viewCache_),s=uE(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(t){return{filter:t}}function hE(t,e){C(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),C(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function pE(t,e,n,r,i){const s=new cE;let o,l;if(n.type===lt.OVERWRITE){const u=n;u.source.fromUser?o=Ua(t,e,u.path,u.snap,r,i,s):(C(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!F(u.path),o=co(t,e,u.path,u.snap,r,i,l,s))}else if(n.type===lt.MERGE){const u=n;u.source.fromUser?o=gE(t,e,u.path,u.children,r,i,s):(C(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),o=$a(t,e,u.path,u.children,r,i,l,s))}else if(n.type===lt.ACK_USER_WRITE){const u=n;u.revert?o=vE(t,e,u.path,r,i,s):o=_E(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===lt.LISTEN_COMPLETE)o=yE(t,e,n.path,r,s);else throw Nr("Unknown operation type: "+n.type);const a=s.getChanges();return mE(e,o,a),{viewCache:o,changes:a}}function mE(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=ba(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Dm(ba(e)))}}function Um(t,e,n,r,i,s){const o=e.eventCache;if(uo(r,n)!=null)return e;{let l,a;if(F(n))if(C(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Dn(e),c=u instanceof D?u:D.EMPTY_NODE,d=tc(r,c);l=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const u=ao(r,Dn(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=L(n);if(u===".priority"){C(tn(n)===1,"Can't have a priority with additional path components");const c=o.getNode();a=e.serverCache.getNode();const d=ff(r,n,c,a);d!=null?l=t.filter.updatePriority(c,d):l=o.getNode()}else{const c=V(n);let d;if(o.isCompleteForChild(u)){a=e.serverCache.getNode();const f=ff(r,n,o.getNode(),a);f!=null?d=o.getNode().getImmediateChild(u).updateChild(c,f):d=o.getNode().getImmediateChild(u)}else d=nc(r,u,e.serverCache);d!=null?l=t.filter.updateChild(o.getNode(),u,d,c,i,s):l=o.getNode()}}return oi(e,l,o.isFullyInitialized()||F(n),t.filter.filtersNodes())}}function co(t,e,n,r,i,s,o,l){const a=e.serverCache;let u;const c=o?t.filter:t.filter.getIndexedFilter();if(F(n))u=c.updateFullNode(a.getNode(),r,null);else if(c.filtersNodes()&&!a.isFiltered()){const m=a.getNode().updateChild(n,r);u=c.updateFullNode(a.getNode(),m,null)}else{const m=L(n);if(!a.isCompleteForPath(n)&&tn(n)>1)return e;const _=V(n),T=a.getNode().getImmediateChild(m).updateChild(_,r);m===".priority"?u=c.updatePriority(a.getNode(),T):u=c.updateChild(a.getNode(),m,T,_,zm,null)}const d=Am(e,u,a.isFullyInitialized()||F(n),c.filtersNodes()),f=new rc(i,d,s);return Um(t,d,n,i,f,l)}function Ua(t,e,n,r,i,s,o){const l=e.eventCache;let a,u;const c=new rc(i,e,s);if(F(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),a=oi(e,u,!0,t.filter.filtersNodes());else{const d=L(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),a=oi(e,u,l.isFullyInitialized(),l.isFiltered());else{const f=V(n),m=l.getNode().getImmediateChild(d);let _;if(F(f))_=r;else{const w=c.getCompleteChild(d);w!=null?Qu(f)===".priority"&&w.getChild(xm(f)).isEmpty()?_=w:_=w.updateChild(f,r):_=D.EMPTY_NODE}if(m.equals(_))a=e;else{const w=t.filter.updateChild(l.getNode(),d,_,f,c,o);a=oi(e,w,l.isFullyInitialized(),t.filter.filtersNodes())}}}return a}function hf(t,e){return t.eventCache.isCompleteForChild(e)}function gE(t,e,n,r,i,s,o){let l=e;return r.foreach((a,u)=>{const c=ue(n,a);hf(e,L(c))&&(l=Ua(t,l,c,u,i,s,o))}),r.foreach((a,u)=>{const c=ue(n,a);hf(e,L(c))||(l=Ua(t,l,c,u,i,s,o))}),l}function pf(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function $a(t,e,n,r,i,s,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let a=e,u;F(n)?u=r:u=new q(null).setTree(n,r);const c=e.serverCache.getNode();return u.children.inorderTraversal((d,f)=>{if(c.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),_=pf(t,m,f);a=co(t,a,new H(d),_,i,s,o,l)}}),u.children.inorderTraversal((d,f)=>{const m=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!c.hasChild(d)&&!m){const _=e.serverCache.getNode().getImmediateChild(d),w=pf(t,_,f);a=co(t,a,new H(d),w,i,s,o,l)}}),a}function _E(t,e,n,r,i,s,o){if(uo(i,n)!=null)return e;const l=e.serverCache.isFiltered(),a=e.serverCache;if(r.value!=null){if(F(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return co(t,e,n,a.getNode().getChild(n),i,s,l,o);if(F(n)){let u=new q(null);return a.getNode().forEachChild(ar,(c,d)=>{u=u.set(new H(c),d)}),$a(t,e,n,u,i,s,l,o)}else return e}else{let u=new q(null);return r.foreach((c,d)=>{const f=ue(n,c);a.isCompleteForPath(f)&&(u=u.set(c,a.getNode().getChild(f)))}),$a(t,e,n,u,i,s,l,o)}}function yE(t,e,n,r,i){const s=e.serverCache,o=Am(e,s.getNode(),s.isFullyInitialized()||F(n),s.isFiltered());return Um(t,o,n,r,zm,i)}function vE(t,e,n,r,i,s){let o;if(uo(r,n)!=null)return e;{const l=new rc(r,e,i),a=e.eventCache.getNode();let u;if(F(n)||L(n)===".priority"){let c;if(e.serverCache.isFullyInitialized())c=ao(r,Dn(e));else{const d=e.serverCache.getNode();C(d instanceof D,"serverChildren would be complete if leaf node"),c=tc(r,d)}c=c,u=t.filter.updateFullNode(a,c,s)}else{const c=L(n);let d=nc(r,c,e.serverCache);d==null&&e.serverCache.isCompleteForChild(c)&&(d=a.getImmediateChild(c)),d!=null?u=t.filter.updateChild(a,c,d,V(n),l,s):e.eventCache.getNode().hasChild(c)?u=t.filter.updateChild(a,c,D.EMPTY_NODE,V(n),l,s):u=a,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=ao(r,Dn(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||uo(r,B())!=null,oi(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new qu(r.getIndex()),s=zw(r);this.processor_=fE(s);const o=n.serverCache,l=n.eventCache,a=i.updateFullNode(D.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(D.EMPTY_NODE,l.getNode(),null),c=new Pn(a,o.isFullyInitialized(),i.filtersNodes()),d=new Pn(u,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=Fo(d,c),this.eventGenerator_=new Qw(this.query_)}get query(){return this.query_}}function EE(t){return t.viewCache_.serverCache.getNode()}function CE(t,e){const n=Dn(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!F(e)&&!n.getImmediateChild(L(e)).isEmpty())?n.getChild(e):null}function mf(t){return t.eventRegistrations_.length===0}function SE(t,e){t.eventRegistrations_.push(e)}function gf(t,e,n){const r=[];if(n){C(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function _f(t,e,n,r){e.type===lt.MERGE&&e.source.queryId!==null&&(C(Dn(t.viewCache_),"We should always have a full cache before handling merges"),C(ba(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=pE(t.processor_,i,e,n,r);return hE(t.processor_,s.viewCache),C(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,$m(t,s.changes,s.viewCache.eventCache.getNode(),null)}function xE(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ie,(s,o)=>{r.push(wr(s,o))}),n.isFullyInitialized()&&r.push(Dm(n.getNode())),$m(t,r,n.getNode(),e)}function $m(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return Gw(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fo;class kE{constructor(){this.views=new Map}}function NE(t){C(!fo,"__referenceConstructor has already been defined"),fo=t}function TE(){return C(fo,"Reference.ts has not been loaded"),fo}function IE(t){return t.views.size===0}function ic(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return C(s!=null,"SyncTree gave us an op for an invalid query."),_f(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(_f(o,e,n,r));return s}}function RE(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let l=ao(n,i?r:null),a=!1;l?a=!0:r instanceof D?(l=tc(n,r),a=!1):(l=D.EMPTY_NODE,a=!1);const u=Fo(new Pn(l,a,!1),new Pn(r,i,!1));return new wE(e,u)}return o}function PE(t,e,n,r,i,s){const o=RE(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),SE(o,n),xE(o,n)}function DE(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const l=nn(t);if(i==="default")for(const[a,u]of t.views.entries())o=o.concat(gf(u,n,r)),mf(u)&&(t.views.delete(a),u.query._queryParams.loadsAllData()||s.push(u.query));else{const a=t.views.get(i);a&&(o=o.concat(gf(a,n,r)),mf(a)&&(t.views.delete(i),a.query._queryParams.loadsAllData()||s.push(a.query)))}return l&&!nn(t)&&s.push(new(TE())(e._repo,e._path)),{removed:s,events:o}}function Bm(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function ur(t,e){let n=null;for(const r of t.views.values())n=n||CE(r,e);return n}function Wm(t,e){if(e._queryParams.loadsAllData())return bo(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Hm(t,e){return Wm(t,e)!=null}function nn(t){return bo(t)!=null}function bo(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ho;function OE(t){C(!ho,"__referenceConstructor has already been defined"),ho=t}function AE(){return C(ho,"Reference.ts has not been loaded"),ho}let ME=1;class yf{constructor(e){this.listenProvider_=e,this.syncPointTree_=new q(null),this.pendingWriteTree_=aE(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Vm(t,e,n,r,i){return Xw(t.pendingWriteTree_,e,n,r,i),i?Qi(t,new Rn(Om(),e,n)):[]}function vn(t,e,n=!1){const r=Jw(t.pendingWriteTree_,e);if(Zw(t.pendingWriteTree_,e)){let s=new q(null);return r.snap!=null?s=s.set(B(),!0):Te(r.children,o=>{s=s.set(new H(o),!0)}),Qi(t,new lo(r.path,s,n))}else return[]}function jo(t,e,n){return Qi(t,new Rn(Ju(),e,n))}function LE(t,e,n){const r=q.fromObject(n);return Qi(t,new Li(Ju(),e,r))}function FE(t,e){return Qi(t,new Mi(Ju(),e))}function bE(t,e,n){const r=oc(t,n);if(r){const i=lc(r),s=i.path,o=i.queryId,l=Me(s,e),a=new Mi(Zu(o),l);return ac(t,s,a)}else return[]}function Ba(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let l=[];if(o&&(e._queryIdentifier==="default"||Hm(o,e))){const a=DE(o,e,n,r);IE(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=a.removed;if(l=a.events,!i){const c=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(f,m)=>nn(m));if(c&&!d){const f=t.syncPointTree_.subtree(s);if(!f.isEmpty()){const m=UE(f);for(let _=0;_<m.length;++_){const w=m[_],T=w.query,p=Km(t,w);t.listenProvider_.startListening(ai(T),po(t,T),p.hashFn,p.onComplete)}}}!d&&u.length>0&&!r&&(c?t.listenProvider_.stopListening(ai(e),null):u.forEach(f=>{const m=t.queryToTagMap.get(zo(f));t.listenProvider_.stopListening(ai(f),m)}))}$E(t,u)}return l}function jE(t,e,n,r){const i=oc(t,r);if(i!=null){const s=lc(i),o=s.path,l=s.queryId,a=Me(o,e),u=new Rn(Zu(l),a,n);return ac(t,o,u)}else return[]}function zE(t,e,n,r){const i=oc(t,r);if(i){const s=lc(i),o=s.path,l=s.queryId,a=Me(o,e),u=q.fromObject(n),c=new Li(Zu(l),a,u);return ac(t,o,c)}else return[]}function vf(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(f,m)=>{const _=Me(f,i);s=s||ur(m,_),o=o||nn(m)});let l=t.syncPointTree_.get(i);l?(o=o||nn(l),s=s||ur(l,B())):(l=new kE,t.syncPointTree_=t.syncPointTree_.set(i,l));let a;s!=null?a=!0:(a=!1,s=D.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((m,_)=>{const w=ur(_,B());w&&(s=s.updateImmediateChild(m,w))}));const u=Hm(l,e);if(!u&&!e._queryParams.loadsAllData()){const f=zo(e);C(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const m=BE();t.queryToTagMap.set(f,m),t.tagToQueryMap.set(m,f)}const c=ec(t.pendingWriteTree_,i);let d=PE(l,e,n,c,s,a);if(!u&&!o&&!r){const f=Wm(l,e);d=d.concat(WE(t,e,f))}return d}function sc(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,l)=>{const a=Me(o,e),u=ur(l,a);if(u)return u});return Fm(i,e,s,n,!0)}function Qi(t,e){return Qm(e,t.syncPointTree_,null,ec(t.pendingWriteTree_,B()))}function Qm(t,e,n,r){if(F(t.path))return Gm(t,e,n,r);{const i=e.get(B());n==null&&i!=null&&(n=ur(i,B()));let s=[];const o=L(t.path),l=t.operationForChild(o),a=e.children.get(o);if(a&&l){const u=n?n.getImmediateChild(o):null,c=bm(r,o);s=s.concat(Qm(l,a,u,c))}return i&&(s=s.concat(ic(i,t,r,n))),s}}function Gm(t,e,n,r){const i=e.get(B());n==null&&i!=null&&(n=ur(i,B()));let s=[];return e.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,u=bm(r,o),c=t.operationForChild(o);c&&(s=s.concat(Gm(c,l,a,u)))}),i&&(s=s.concat(ic(i,t,r,n))),s}function Km(t,e){const n=e.query,r=po(t,n);return{hashFn:()=>(EE(e)||D.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?bE(t,n._path,r):FE(t,n._path);{const s=b0(i,n);return Ba(t,n,null,s)}}}}function po(t,e){const n=zo(e);return t.queryToTagMap.get(n)}function zo(t){return t._path.toString()+"$"+t._queryIdentifier}function oc(t,e){return t.tagToQueryMap.get(e)}function lc(t){const e=t.indexOf("$");return C(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new H(t.substr(0,e))}}function ac(t,e,n){const r=t.syncPointTree_.get(e);C(r,"Missing sync point for query tag that we're tracking");const i=ec(t.pendingWriteTree_,e);return ic(r,n,i,null)}function UE(t){return t.fold((e,n,r)=>{if(n&&nn(n))return[bo(n)];{let i=[];return n&&(i=Bm(n)),Te(r,(s,o)=>{i=i.concat(o)}),i}})}function ai(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(AE())(t._repo,t._path):t}function $E(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=zo(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function BE(){return ME++}function WE(t,e,n){const r=e._path,i=po(t,e),s=Km(t,n),o=t.listenProvider_.startListening(ai(e),i,s.hashFn,s.onComplete),l=t.syncPointTree_.subtree(r);if(i)C(!nn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((u,c,d)=>{if(!F(u)&&c&&nn(c))return[bo(c).query];{let f=[];return c&&(f=f.concat(Bm(c).map(m=>m.query))),Te(d,(m,_)=>{f=f.concat(_)}),f}});for(let u=0;u<a.length;++u){const c=a[u];t.listenProvider_.stopListening(ai(c),po(t,c))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new uc(n)}node(){return this.node_}}class cc{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ue(this.path_,e);return new cc(this.syncTree_,n)}node(){return sc(this.syncTree_,this.path_)}}const HE=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},wf=function(t,e,n){if(!t||typeof t!="object")return t;if(C(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return VE(t[".sv"],e,n);if(typeof t[".sv"]=="object")return QE(t[".sv"],e);C(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},VE=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:C(!1,"Unexpected server value: "+t)}},QE=function(t,e,n){t.hasOwnProperty("increment")||C(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&C(!1,"Unexpected increment value: "+r);const i=e.node();if(C(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},GE=function(t,e,n,r){return dc(e,new cc(n,t),r)},Ym=function(t,e,n){return dc(t,new uc(e),n)};function dc(t,e,n){const r=t.getPriority().val(),i=wf(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,l=wf(o.getValue(),e,n);return l!==o.getValue()||i!==o.getPriority().val()?new pe(l,ce(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new pe(i))),o.forEachChild(ie,(l,a)=>{const u=dc(a,e.getImmediateChild(l),n);u!==a&&(s=s.updateImmediateChild(l,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function hc(t,e){let n=e instanceof H?e:new H(e),r=t,i=L(n);for(;i!==null;){const s=_r(r.node.children,i)||{children:{},childCount:0};r=new fc(i,r,s),n=V(n),i=L(n)}return r}function Rr(t){return t.node.value}function qm(t,e){t.node.value=e,Wa(t)}function Xm(t){return t.node.childCount>0}function KE(t){return Rr(t)===void 0&&!Xm(t)}function Uo(t,e){Te(t.node.children,(n,r)=>{e(new fc(n,t,r))})}function Jm(t,e,n,r){n&&e(t),Uo(t,i=>{Jm(i,e,!0)})}function YE(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Gi(t){return new H(t.parent===null?t.name:Gi(t.parent)+"/"+t.name)}function Wa(t){t.parent!==null&&qE(t.parent,t.name,t)}function qE(t,e,n){const r=KE(n),i=_t(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Wa(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Wa(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE=/[\[\].#$\/\u0000-\u001F\u007F]/,JE=/[\[\].#$\u0000-\u001F\u007F]/,Nl=10*1024*1024,pc=function(t){return typeof t=="string"&&t.length!==0&&!XE.test(t)},Zm=function(t){return typeof t=="string"&&t.length!==0&&!JE.test(t)},ZE=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Zm(t)},eg=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Mo(t)||t&&typeof t=="object"&&_t(t,".sv")},mo=function(t,e,n,r){r&&e===void 0||$o(yr(t,"value"),e,n)},$o=function(t,e,n){const r=n instanceof H?new _w(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+pn(r));if(typeof e=="function")throw new Error(t+"contains a function "+pn(r)+" with contents = "+e.toString());if(Mo(e))throw new Error(t+"contains "+e.toString()+" "+pn(r));if(typeof e=="string"&&e.length>Nl/3&&Ao(e)>Nl)throw new Error(t+"contains a string greater than "+Nl+" utf8 bytes "+pn(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Te(e,(o,l)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!pc(o)))throw new Error(t+" contains an invalid key ("+o+") "+pn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);yw(r,o),$o(t,l,r),vw(r)}),i&&s)throw new Error(t+' contains ".value" child '+pn(r)+" in addition to actual children.")}},eC=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=Pi(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!pc(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(gw);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Xe(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},tC=function(t,e,n,r){const i=yr(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Te(e,(o,l)=>{const a=new H(o);if($o(i,l,ue(n,a)),Qu(a)===".priority"&&!eg(l))throw new Error(i+"contains an invalid value for '"+a.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(a)}),eC(i,s)},nC=function(t,e,n){if(Mo(e))throw new Error(yr(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!eg(e))throw new Error(yr(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},tg=function(t,e,n,r){if(!Zm(n))throw new Error(yr(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},rC=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),tg(t,e,n)},wn=function(t,e){if(L(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},iC=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!pc(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!ZE(n))throw new Error(yr(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function mc(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Gu(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function ng(t,e,n){mc(t,n),rg(t,r=>Gu(r,e))}function At(t,e,n){mc(t,n),rg(t,r=>Xe(r,e)||Xe(e,r))}function rg(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(oC(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function oC(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();ii&&we("event: "+n.toString()),Tr(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="repo_interrupt",aC=25;class uC{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new sC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=oo(),this.transactionQueueTree_=new fc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function cC(t,e,n){if(t.stats_=Hu(t.repoInfo_),t.forceRestClient_||$0())t.server_=new so(t.repoInfo_,(r,i,s,o)=>{Ef(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Cf(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{_e(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Nt(t.repoInfo_,e,(r,i,s,o)=>{Ef(t,r,i,s,o)},r=>{Cf(t,r)},r=>{dC(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Q0(t.repoInfo_,()=>new Vw(t.stats_,t.server_)),t.infoData_=new Uw,t.infoSyncTree_=new yf({startListening:(r,i,s,o)=>{let l=[];const a=t.infoData_.getNode(r._path);return a.isEmpty()||(l=jo(t.infoSyncTree_,r._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),_c(t,"connected",!1),t.serverSyncTree_=new yf({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(l,a)=>{const u=o(l,a);At(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function ig(t){const n=t.infoData_.getNode(new H(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function gc(t){return HE({timestamp:ig(t)})}function Ef(t,e,n,r,i){t.dataUpdateCount++;const s=new H(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const a=Zs(n,u=>ce(u));o=zE(t.serverSyncTree_,s,a,i)}else{const a=ce(n);o=jE(t.serverSyncTree_,s,a,i)}else if(r){const a=Zs(n,u=>ce(u));o=LE(t.serverSyncTree_,s,a)}else{const a=ce(n);o=jo(t.serverSyncTree_,s,a)}let l=s;o.length>0&&(l=Bo(t,s)),At(t.eventQueue_,l,o)}function Cf(t,e){_c(t,"connected",e),e===!1&&hC(t)}function dC(t,e){Te(e,(n,r)=>{_c(t,n,r)})}function _c(t,e,n){const r=new H("/.info/"+e),i=ce(n);t.infoData_.updateSnapshot(r,i);const s=jo(t.infoSyncTree_,r,i);At(t.eventQueue_,r,s)}function sg(t){return t.nextWriteId_++}function fC(t,e,n,r,i){yc(t,"set",{path:e.toString(),value:n,priority:r});const s=gc(t),o=ce(n,r),l=sc(t.serverSyncTree_,e),a=Ym(o,l,s),u=sg(t),c=Vm(t.serverSyncTree_,e,a,u,!0);mc(t.eventQueue_,c),t.server_.put(e.toString(),o.val(!0),(f,m)=>{const _=f==="ok";_||ze("set at "+e+" failed: "+f);const w=vn(t.serverSyncTree_,u,!_);At(t.eventQueue_,e,w),Cr(t,i,f,m)});const d=cg(t,e);Bo(t,d),At(t.eventQueue_,d,[])}function hC(t){yc(t,"onDisconnectEvents");const e=gc(t),n=oo();Fa(t.onDisconnect_,B(),(i,s)=>{const o=GE(i,s,t.serverSyncTree_,e);Ir(n,i,o)});let r=[];Fa(n,B(),(i,s)=>{r=r.concat(jo(t.serverSyncTree_,i,s));const o=cg(t,i);Bo(t,o)}),t.onDisconnect_=oo(),At(t.eventQueue_,B(),r)}function pC(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&La(t.onDisconnect_,e),Cr(t,n,r,i)})}function Sf(t,e,n,r){const i=ce(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&Ir(t.onDisconnect_,e,i),Cr(t,r,s,o)})}function mC(t,e,n,r,i){const s=ce(n,r);t.server_.onDisconnectPut(e.toString(),s.val(!0),(o,l)=>{o==="ok"&&Ir(t.onDisconnect_,e,s),Cr(t,i,o,l)})}function gC(t,e,n,r){if(ka(n)){we("onDisconnect().update() called with empty data.  Don't do anything."),Cr(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,s)=>{i==="ok"&&Te(n,(o,l)=>{const a=ce(l);Ir(t.onDisconnect_,ue(e,o),a)}),Cr(t,r,i,s)})}function _C(t,e,n){let r;L(e._path)===".info"?r=vf(t.infoSyncTree_,e,n):r=vf(t.serverSyncTree_,e,n),ng(t.eventQueue_,e._path,r)}function Ha(t,e,n){let r;L(e._path)===".info"?r=Ba(t.infoSyncTree_,e,n):r=Ba(t.serverSyncTree_,e,n),ng(t.eventQueue_,e._path,r)}function yC(t){t.persistentConnection_&&t.persistentConnection_.interrupt(lC)}function yc(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),we(n,...e)}function Cr(t,e,n,r){e&&Tr(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function og(t,e,n){return sc(t.serverSyncTree_,e,n)||D.EMPTY_NODE}function vc(t,e=t.transactionQueueTree_){if(e||Wo(t,e),Rr(e)){const n=ag(t,e);C(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&vC(t,Gi(e),n)}else Xm(e)&&Uo(e,n=>{vc(t,n)})}function vC(t,e,n){const r=n.map(u=>u.currentWriteId),i=og(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const c=n[u];C(c.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;const d=Me(e,c.path);s=s.updateChild(d,c.currentOutputSnapshotRaw)}const l=s.val(!0),a=e;t.server_.put(a.toString(),l,u=>{yc(t,"transaction put response",{path:a.toString(),status:u});let c=[];if(u==="ok"){const d=[];for(let f=0;f<n.length;f++)n[f].status=2,c=c.concat(vn(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Wo(t,hc(t.transactionQueueTree_,e)),vc(t,t.transactionQueueTree_),At(t.eventQueue_,e,c);for(let f=0;f<d.length;f++)Tr(d[f])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{ze("transaction at "+a.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}Bo(t,e)}},o)}function Bo(t,e){const n=lg(t,e),r=Gi(n),i=ag(t,n);return wC(t,i,r),r}function wC(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const a=e[l],u=Me(n,a.path);let c=!1,d;if(C(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)c=!0,d=a.abortReason,i=i.concat(vn(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=aC)c=!0,d="maxretry",i=i.concat(vn(t.serverSyncTree_,a.currentWriteId,!0));else{const f=og(t,a.path,o);a.currentInputSnapshot=f;const m=e[l].update(f.val());if(m!==void 0){$o("transaction failed: Data returned ",m,a.path);let _=ce(m);typeof m=="object"&&m!=null&&_t(m,".priority")||(_=_.updatePriority(f.getPriority()));const T=a.currentWriteId,p=gc(t),h=Ym(_,f,p);a.currentOutputSnapshotRaw=_,a.currentOutputSnapshotResolved=h,a.currentWriteId=sg(t),o.splice(o.indexOf(T),1),i=i.concat(Vm(t.serverSyncTree_,a.path,h,a.currentWriteId,a.applyLocally)),i=i.concat(vn(t.serverSyncTree_,T,!0))}else c=!0,d="nodata",i=i.concat(vn(t.serverSyncTree_,a.currentWriteId,!0))}At(t.eventQueue_,n,i),i=[],c&&(e[l].status=2,function(f){setTimeout(f,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(d==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(d),!1,null))))}Wo(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)Tr(r[l]);vc(t,t.transactionQueueTree_)}function lg(t,e){let n,r=t.transactionQueueTree_;for(n=L(e);n!==null&&Rr(r)===void 0;)r=hc(r,n),e=V(e),n=L(e);return r}function ag(t,e){const n=[];return ug(t,e,n),n.sort((r,i)=>r.order-i.order),n}function ug(t,e,n){const r=Rr(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Uo(e,i=>{ug(t,i,n)})}function Wo(t,e){const n=Rr(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,qm(e,n.length>0?n:void 0)}Uo(e,r=>{Wo(t,r)})}function cg(t,e){const n=Gi(lg(t,e)),r=hc(t.transactionQueueTree_,e);return YE(r,i=>{Tl(t,i)}),Tl(t,r),Jm(r,i=>{Tl(t,i)}),n}function Tl(t,e){const n=Rr(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(C(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(C(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(vn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?qm(e,void 0):n.length=s+1,At(t.eventQueue_,Gi(e),i);for(let o=0;o<r.length;o++)Tr(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function CC(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ze(`Invalid query segment '${n}' in query '${t}'`)}return e}const xf=function(t,e){const n=SC(t),r=n.namespace;n.domain==="firebase.com"&&Ot(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Ot("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||O0();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new mm(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new H(n.pathString)}},SC=function(t){let e="",n="",r="",i="",s="",o=!0,l="https",a=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let c=t.indexOf("/");c===-1&&(c=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(c,d)),c<d&&(i=EC(t.substring(c,d)));const f=CC(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=l==="https"||l==="wss",a=parseInt(e.substring(u+1),10)):u=e.length;const m=e.slice(0,u);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const _=e.indexOf(".");r=e.substring(0,_).toLowerCase(),n=e.substring(_+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:a,domain:n,subdomain:r,secure:o,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",xC=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=kf.charAt(n%64),n=Math.floor(n/64);C(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=kf.charAt(e[i]);return C(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+_e(this.snapshot.exportVal())}}class NC{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return C(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new Et;return pC(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){wn("OnDisconnect.remove",this._path);const e=new Et;return Sf(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){wn("OnDisconnect.set",this._path),mo("OnDisconnect.set",e,this._path,!1);const n=new Et;return Sf(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){wn("OnDisconnect.setWithPriority",this._path),mo("OnDisconnect.setWithPriority",e,this._path,!1),nC("OnDisconnect.setWithPriority",n);const r=new Et;return mC(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){wn("OnDisconnect.update",this._path),tC("OnDisconnect.update",e,this._path);const n=new Et;return gC(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return F(this._path)?null:Qu(this._path)}get ref(){return new ln(this._repo,this._path)}get _queryIdentifier(){const e=lf(this._queryParams),n=Bu(e);return n==="{}"?"default":n}get _queryObject(){return lf(this._queryParams)}isEqual(e){if(e=Mn(e),!(e instanceof wc))return!1;const n=this._repo===e._repo,r=Gu(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+mw(this._path)}}class ln extends wc{constructor(e,n){super(e,n,new Xu,!1)}get parent(){const e=xm(this._path);return e===null?null:new ln(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class go{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new H(e),r=Fi(this.ref,e);return new go(this._node.getChild(n),r,ie)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new go(i,Fi(this.ref,r),ie)))}hasChild(e){const n=new H(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ee(t,e){return t=Mn(t),t._checkNotDeleted("ref"),e!==void 0?Fi(t._root,e):t._root}function Fi(t,e){return t=Mn(t),L(t._path)===null?rC("child","path",e):tg("child","path",e),new ln(t._repo,ue(t._path,e))}function RC(t){return t=Mn(t),new IC(t._repo,t._path)}function dg(t,e){t=Mn(t),wn("push",t._path),mo("push",e,t._path,!0);const n=ig(t._repo),r=xC(n),i=Fi(t,r),s=Fi(t,r);let o;return e!=null?o=We(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function Ki(t){return wn("remove",t._path),We(t,null)}function We(t,e){t=Mn(t),wn("set",t._path),mo("set",e,t._path,!1);const n=new Et;return fC(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class Ec{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new kC("value",this,new go(e.snapshotNode,new ln(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new NC(this,e,n):null}matches(e){return e instanceof Ec?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function PC(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const a=n,u=(c,d)=>{Ha(t._repo,t,l),a(c,d)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new TC(n,s||void 0),l=new Ec(o);return _C(t._repo,t,l),()=>Ha(t._repo,t,l)}function an(t,e,n,r){return PC(t,"value",e,n,r)}function Cc(t,e,n){Ha(t._repo,t,null)}NE(ln);OE(ln);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC="FIREBASE_DATABASE_EMULATOR_HOST",Va={};let OC=!1;function AC(t,e,n,r){t.repoInfo_=new mm(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function MC(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Ot("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),we("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=xf(s,i),l=o.repoInfo,a;typeof process<"u"&&Bd&&(a=Bd[DC]),a?(s=`http://${a}?ns=${l.namespace}`,o=xf(s,i),l=o.repoInfo):o.repoInfo.secure;const u=new W0(t.name,t.options,e);iC("Invalid Firebase Database URL",o),F(o.path)||Ot("Database URL must point to the root of a Firebase Database (not including a child path).");const c=FC(l,t,u,new B0(t.name,n));return new bC(c,t)}function LC(t,e){const n=Va[e];(!n||n[t.key]!==t)&&Ot(`Database ${e}(${t.repoInfo_}) has already been deleted.`),yC(t),delete n[t.key]}function FC(t,e,n,r){let i=Va[e.name];i||(i={},Va[e.name]=i);let s=i[t.toURLString()];return s&&Ot("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new uC(t,OC,n,r),i[t.toURLString()]=s,s}class bC{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(cC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ln(this._repo,B())),this._rootInternal}_delete(){return this._rootInternal!==null&&(LC(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ot("Cannot call "+e+" on a deleted database.")}}function jC(t=p0(),e){const n=c0(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Zy("database");r&&zC(n,...r)}return n}function zC(t,e,n,r={}){t=Mn(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Ot("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ot('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ts(Ts.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:ev(r.mockUserToken,t.app.options.projectId);s=new Ts(o)}AC(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(t){N0(h0),to(new Ti("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return MC(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),or(Wd,Hd,t),or(Wd,Hd,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C={".sv":"timestamp"};function BC(){return $C}Nt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Nt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};UC();const WC={apiKey:"AIzaSyDlKWmqmC4Rqt0gbTISjp0FQ0Rwdo5er1M",authDomain:"chat-app-ayudharachman.firebaseapp.com",databaseURL:"https://chat-app-ayudharachman-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"chat-app-ayudharachman",storageBucket:"chat-app-ayudharachman.firebasestorage.app",messagingSenderId:"1025809995755",appId:"1:1025809995755:web:31a823477897202a88ebae"},HC=Jp(WC),te=jC(HC),Un=(t,e="default")=>{const n=ee(te,`rooms/${e}/messages`);return dg(n,{...t,timestamp:Date.now()})},VC=(t,e="default")=>{const n=ee(te,`rooms/${e}/messages`);return an(n,r=>{const i=[];r.forEach(s=>{const o={id:s.key,...s.val()};i.push(o)}),i.sort((s,o)=>s.timestamp-o.timestamp),t(i)}),()=>Cc(n)},Nf=async(t="default")=>{try{const e=ee(te,`rooms/${t}/messages`);return await We(e,{}),console.log(`All messages cleared from room: ${t}`),!0}catch(e){return console.error("Error clearing messages:",e),!1}},QC=(t,e,n="default")=>{const r=ee(te,`rooms/${n}/onlineUsers/${t}`);We(r,{name:e,timestamp:Date.now(),lastSeen:BC()}),RC(r).remove()},Il=(t,e="default")=>{const n=ee(te,`rooms/${e}/onlineUsers/${t}`);Ki(n)},GC=(t,e="default")=>{const n=ee(te,`rooms/${e}/onlineUsers`);return an(n,r=>{const i=[];r.forEach(s=>{const o=s.val();i.push(o.name)}),t(i)}),()=>Cc(n)},KC=(t,e,n="default")=>{const r=ee(te,`rooms/${n}/typing/${t}`);We(r,{name:e,timestamp:Date.now()}),setTimeout(()=>{Ki(r)},3e3)},Rl=(t,e="default")=>{const n=ee(te,`rooms/${e}/typing/${t}`);Ki(n)},YC=(t,e="default")=>{const n=ee(te,`rooms/${e}/typing`);return an(n,r=>{const i=[];r.forEach(s=>{const o=s.val();i.push(o.name)}),t(i)}),()=>Cc(n)},qC=async(t,e,n,r)=>{try{const i=ee(te,"rooms"),s=dg(i),o=s.key,l={id:o,name:t,password:e,creator:n,creatorId:r,createdAt:Date.now(),users:{[r]:{name:n,joinedAt:Date.now(),isCreator:!0}}};console.log("Creating room with data:",l),await We(s,l);const a=ee(te,`rooms/${o}/messages`),u=ee(te,`rooms/${o}/onlineUsers`),c=ee(te,`rooms/${o}/typing`);return await We(a,{}),await We(u,{}),await We(c,{}),console.log("Room created successfully with ID:",o),console.log("Room structure initialized"),o}catch(i){throw console.error("Error in createRoom:",i),i}},XC=()=>new Promise(t=>{const e=ee(te,"rooms");an(e,n=>{const r=n.val(),i=[];r&&Object.keys(r).forEach(s=>{const o=r[s];o.name&&o.creator&&i.push({id:s,name:o.name,creator:o.creator,createdAt:o.createdAt})}),t(i)},{onlyOnce:!0})}),JC=async(t,e,n,r)=>{const i=ee(te,`rooms/${t}`);return new Promise((s,o)=>{an(i,l=>{const a=l.val();if(!a){o("Room tidak ditemukan");return}if(a.password!==e){o("Password salah");return}const u=ee(te,`rooms/${t}/users/${n}`);We(u,{name:r,joinedAt:Date.now(),isCreator:!1}),s({id:t,name:a.name,creator:a.creator,creatorId:a.creatorId})},{onlyOnce:!0})})},Pl=(t,e)=>{const n=ee(te,`rooms/${t}/users/${e}`);Ki(n)},ZC=async t=>{try{const e=ee(te,`rooms/${t}`);return await Ki(e),console.log(`Room ${t} deleted successfully`),!0}catch(e){throw console.error("Error deleting room:",e),e}},eS=async(t,e)=>new Promise(n=>{const r=ee(te,`rooms/${t}`);an(r,i=>{const s=i.val();s&&s.creatorId===e?n(!0):n(!1)},{onlyOnce:!0})}),tS=async t=>new Promise(e=>{const n=ee(te,`rooms/${t}/users`);an(n,r=>{const i=r.val();if(i){const s=Object.keys(i).map(o=>({id:o,...i[o]}));e(s)}else e([])},{onlyOnce:!0})}),nS=async(t,e,n)=>{try{const r=await new Promise(o=>{const l=ee(te,`rooms/${t}`);an(l,a=>{o(a.val())},{onlyOnce:!0})});if(!r)throw new Error("Room data not found");const i=ee(te,`rooms/${t}`);await We(i,{...r,creator:n,creatorId:e});const s=ee(te,`rooms/${t}/users/${e}`);return await We(s,{name:n,joinedAt:Date.now(),isCreator:!0}),console.log(`Room creator transferred to ${n} (${e})`),await Un({text:`${n} sekarang menjadi creator room`,sender:"System",timestamp:Date.now(),type:"system"},t),!0}catch(r){throw console.error("Error transferring room creator:",r),r}},rS=async(t,e,n)=>{try{console.log(`Handling user leave for room ${t}, user: ${n}`);const r=await tS(t);console.log(`Remaining users after ${n} leaves:`,r);const i=r.filter(s=>s.id!==e);if(console.log("Other users (excluding leaving user):",i),i.length===0)return await ZC(t),{deleted:!0,newCreator:null};if(await eS(t,e)){const o=i[0];return console.log("Creator left, transferring to:",o),await nS(t,o.id,o.name),{deleted:!1,newCreator:o.name}}else return console.log("Regular user left, no action needed"),{deleted:!1,newCreator:null}}catch(r){throw console.error("Error handling user leave:",r),r}},Tf=async t=>{try{if(!t)throw new Error("Room ID is required");const e=ee(te,`rooms/${t}/messages`);return await We(e,{}),console.log(`All messages cleared from current room: ${t}`),!0}catch(e){throw console.error("Error clearing current room messages:",e),e}};class iS{constructor(){this.permission=null,this.isSupported="Notification"in window,this.init()}async init(){if(!this.isSupported){console.log("Browser notifications not supported");return}this.permission=Notification.permission,this.permission==="default"&&console.log("Notification permission not yet granted")}async requestPermission(){if(!this.isSupported)return!1;try{return this.permission=await Notification.requestPermission(),this.permission==="granted"}catch(e){return console.error("Error requesting notification permission:",e),!1}}showNotification(e,n={}){if(!this.isSupported||this.permission!=="granted")return null;if(document.visibilityState==="visible")return console.log("Tab is active, skipping notification"),null;const r=new Notification(e,{icon:"/favicon.ico",badge:"/favicon.ico",...n});return r.onclick=()=>{window.focus(),r.close()},r}showChatNotification(e,n,r=""){const i=r?`${e} di ${r}`:e,s=n.length>100?n.substring(0,100)+"...":n;return this.showNotification(i,{body:s,icon:"/favicon.ico",badge:"/favicon.ico",tag:"chat-message",requireInteraction:!1,silent:!1})}vibrate(e=[200,100,200]){"vibrate"in navigator&&navigator.vibrate(e)}}const Hr=new iS;function sS(){const[t,e]=U.useState([]),[n,r]=U.useState(null),[i,s]=U.useState([]),[o,l]=U.useState([]),[a,u]=U.useState(null),[c,d]=U.useState(null),[f,m]=U.useState([]),[_,w]=U.useState(!1),[T,p]=U.useState(!1),[h,g]=U.useState([]),[y]=U.useState(()=>`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`),x=U.useRef([]);U.useEffect(()=>{if(n&&Hr.isSupported&&Hr.permission==="default"){const S=setTimeout(()=>{p(!0)},2e3);return()=>clearTimeout(S)}},[n]);const R=async()=>{const S=await Hr.requestPermission();p(!1),S&&I("Notifikasi diaktifkan!","success")},P=()=>{p(!1)},I=(S,A="info",Q=4e3)=>{const ne=Date.now(),yt={id:ne,message:S,type:A};g(tt=>[...tt,yt]),setTimeout(()=>{J(ne)},Q)},J=S=>{g(A=>A.filter(Q=>Q.id!==S))},j=S=>{if(console.log("Received messages:",S),x.current.length>0&&S.length>x.current.length){const A=S[S.length-1];A.type==="user"&&A.sender!==(n==null?void 0:n.name)&&(document.visibilityState!=="visible"||document.hidden?(Hr.showChatNotification(A.sender,A.text,c==null?void 0:c.name),Hr.vibrate()):I(`Pesan baru dari ${A.sender}`,"info",3e3))}x.current=S,e(S)};U.useEffect(()=>{if(n&&c){const S=setTimeout(()=>{Ue()},864e5);return()=>clearTimeout(S)}},[n,c]),U.useEffect(()=>{if(c){const S=setInterval(()=>{t.length>0&&(Nf(c.id),e([{id:Date.now(),text:"Pesan otomatis dihapus setelah 24 jam",timestamp:Date.now(),type:"system"}]))},864e5);return()=>clearInterval(S)}},[t,c]),U.useEffect(()=>{if(n&&c){x.current=[];const S=VC(j,c.id),A=GC(ne=>{console.log("Online users:",ne),s(ne)},c.id),Q=YC(ne=>{console.log("Typing users:",ne),l(ne)},c.id);return QC(y,n.name,c.id),()=>{console.log("Cleaning up room subscriptions"),S(),A(),Q(),Il(y,c.id),Rl(y,c.id),c&&Pl(c.id,y)}}},[n,y,c]),U.useEffect(()=>{const S=()=>{document.visibilityState==="visible"&&console.log("Tab is now active")};return document.addEventListener("visibilitychange",S),()=>{document.removeEventListener("visibilitychange",S)}},[]);const Ue=()=>{const S={id:Date.now(),text:"Sesi berakhir, silakan login kembali",timestamp:Date.now(),type:"system"};e(A=>[...A,S]),setTimeout(()=>{c&&(Il(y,c.id),Pl(c.id,y)),r(null),e([]),s([]),l([]),u(null),d(null)},2e3)},un=async S=>{r({name:S});const Q=await XC();m(Q),Q.length===0?w(!0):w(!1)},cn=async(S,A)=>{try{const Q=await qC(S,A,n.name,y),ne={id:Q,name:S,creator:n.name,creatorId:y};d(ne),u(Date.now()),setTimeout(async()=>{try{await Un({text:`${n.name} membuat room "${S}"`,sender:"System",timestamp:Date.now(),type:"system"},Q),await Un({text:`${n.name} bergabung ke chat`,sender:"System",timestamp:Date.now(),type:"system"},Q)}catch(yt){console.error("Error sending welcome messages:",yt)}},500)}catch(Q){Q.message&&Q.message.includes("PERMISSION_DENIED")?alert("Error: Permission denied. Silakan cek Firebase Security Rules."):alert("Gagal membuat room: "+Q.message)}},Yi=async(S,A)=>{try{const Q=await JC(S,A,y,n.name);d(Q),u(Date.now()),await Un({text:`${n.name} bergabung ke chat`,sender:"System",timestamp:Date.now(),type:"system"},S)}catch(Q){console.error("Error joining room:",Q),I("Gagal bergabung ke room","error")}},Ho=async S=>{S.trim()===""||!n||!c||await Un({text:S.trim(),sender:n.name,timestamp:Date.now(),type:"user"},c.id)},Pr=()=>{n&&c&&KC(y,n.name,c.id)},Dr=()=>{n&&c&&Rl(y,c.id)},k=async()=>{try{if(await Tf(c.id)){e([]);const A={id:Date.now(),text:`Semua pesan di room "${c.name}" telah dihapus`,sender:"System",timestamp:Date.now(),type:"system"};e([A]),I("Pesan berhasil dihapus","success")}else I("Gagal menghapus pesan","error")}catch(S){console.error("Error clearing chat:",S),I("Error menghapus pesan","error")}},O=async()=>{if(n&&c){Un({text:`${n.name} meninggalkan chat`,sender:"System",timestamp:Date.now(),type:"system"},c.id),Il(y,c.id),Rl(y,c.id),Pl(c.id,y);const S=await rS(c.id,y,n.name);S.deleted?(console.log(`Room ${c.id} deleted because no users remaining`),I("Room dihapus karena tidak ada pengguna","info")):S.newCreator&&(console.log(`Creator transferred to ${S.newCreator}`),I(`Creator room dialihkan ke ${S.newCreator}`,"info")),Nf(c.id),Tf(c.id)}r(null),e([]),s([]),l([]),u(null),d(null),w(!1)},M=()=>{if(!a)return null;const A=Date.now()-a,ne=24*60*60*1e3-A;if(ne<=0)return"00:00:00";const yt=Math.floor(ne/(60*60*1e3)),tt=Math.floor(ne%(60*60*1e3)/(60*1e3)),bn=Math.floor(ne%(60*1e3)/1e3);return`${yt.toString().padStart(2,"0")}:${tt.toString().padStart(2,"0")}:${bn.toString().padStart(2,"0")}`};return n?c?v.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 relative",children:[v.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm",children:h.map(S=>v.jsx(oS,{message:S.message,type:S.type,onClose:()=>J(S.id)},S.id))}),T&&v.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-white rounded-lg shadow-lg border border-gray-200 p-4 max-w-sm",children:v.jsxs("div",{className:"flex items-start space-x-3",children:[v.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:v.jsx("span",{className:"text-blue-600 text-sm",children:""})}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Aktifkan Notifikasi?"}),v.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Dapatkan notifikasi"}),v.jsxs("div",{className:"flex space-x-2 mt-3",children:[v.jsx("button",{onClick:R,className:"flex-1 bg-blue-500 text-white py-2 px-3 rounded-lg text-xs font-medium hover:bg-blue-600 transition-colors",children:"Aktifkan"}),v.jsx("button",{onClick:P,className:"flex-1 bg-gray-200 text-gray-700 py-2 px-3 rounded-lg text-xs font-medium hover:bg-gray-300 transition-colors",children:"Nanti"})]})]})]})}),v.jsx(Uy,{messages:t,currentUser:n.name,onlineUsers:i,typingUsers:o,onLogout:O,onClearChat:k,remainingTime:M(),currentRoom:c}),v.jsx($y,{onSend:Ho,onTypingStart:Pr,onTypingStop:Dr})]}):v.jsx(Wy,{rooms:f,userName:n.name,onCreateRoom:cn,onJoinRoom:Yi,showRoomSetup:_,onToggleSetup:()=>w(!_)}):v.jsx(By,{onSetup:un})}const oS=({message:t,type:e="info",onClose:n})=>{U.useEffect(()=>{const s=setTimeout(n,4e3);return()=>clearTimeout(s)},[n]);const r=()=>{switch(e){case"success":return"bg-green-500";case"error":return"bg-red-500";case"warning":return"bg-yellow-500";default:return"bg-blue-500"}},i=()=>{switch(e){case"success":return"";case"error":return"";case"warning":return"";default:return""}};return v.jsx("div",{className:`${r()} text-white rounded-lg shadow-lg p-3 animate-fade-in`,children:v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("span",{className:"text-sm",children:i()}),v.jsx("p",{className:"text-sm flex-1",children:t}),v.jsx("button",{onClick:n,className:"text-white hover:text-gray-200 transition-colors",children:v.jsx("span",{className:"text-lg",children:""})})]})})};Dl.createRoot(document.getElementById("root")).render(v.jsx(Ig.StrictMode,{children:v.jsx(sS,{})}));
